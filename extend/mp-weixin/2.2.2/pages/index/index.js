(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{5572:function(e,t,n){"use strict";var o=n("a242"),i=n.n(o);i.a},"634d":function(e,t,n){"use strict";n.r(t);var o=n("9cb1"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},"9cb1":function(e,t,n){"use strict";(function(e,o){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("9523")),r=n("6859"),s=n("58d4"),c=n("cd6d"),l=n("5a8f"),u=(n("937f"),n("f823")),d=n("26cb"),h=n("736f"),f=n("041f"),g=n("3255"),p=i(n("c5df")),m=i(n("9673")),v=n("f26a"),b=e.getSystemInfoSync().statusBarHeight+"px",w=getApp(),_={computed:(0,g.configMap)({hide_mer_status:0,recommend_switch:0,beian_sn:"",share_title:"",share_pic:"",site_name:"",hot_ranking_switch:0,navigation:{}},(0,d.mapGetters)(["isLogin","uid","keyColor"])),mixins:[p.default],components:{easyLoadimage:function(){Promise.all([n.e("common/vendor"),n.e("components/easy-loadimage/easy-loadimage")]).then(function(){return resolve(n("2243"))}.bind(null,n)).catch(n.oe)},recommend:function(){Promise.all([n.e("common/vendor"),n.e("components/recommend/index")]).then(function(){return resolve(n("1857"))}.bind(null,n)).catch(n.oe)},customTab:function(){n.e("components/customTab").then(function(){return resolve(n("40b7"))}.bind(null,n)).catch(n.oe)},passwordPopup:function(){Promise.all([n.e("common/vendor"),n.e("components/passwordPopup/index")]).then(function(){return resolve(n("5edd"))}.bind(null,n)).catch(n.oe)},activeParty:function(){n.e("pages/index/component/activeParty").then(function(){return resolve(n("f382"))}.bind(null,n)).catch(n.oe)},headerSerch:function(){n.e("pages/index/component/headerSerch").then(function(){return resolve(n("bf71"))}.bind(null,n)).catch(n.oe)},homeComb:function(){n.e("pages/index/component/homeComb").then(function(){return resolve(n("f9a3"))}.bind(null,n)).catch(n.oe)},bargain:function(){n.e("pages/index/component/bargain").then(function(){return resolve(n("d20a"))}.bind(null,n)).catch(n.oe)},coupon:function(){n.e("pages/index/component/coupon").then(function(){return resolve(n("ac25"))}.bind(null,n)).catch(n.oe)},blankPage:function(){n.e("pages/index/component/blankPage").then(function(){return resolve(n("a529"))}.bind(null,n)).catch(n.oe)},combination:function(){n.e("pages/index/component/combination").then(function(){return resolve(n("14da"))}.bind(null,n)).catch(n.oe)},customerService:function(){n.e("pages/index/component/customerService").then(function(){return resolve(n("07c4"))}.bind(null,n)).catch(n.oe)},goodList:function(){n.e("pages/index/component/goodList").then(function(){return resolve(n("7b84"))}.bind(null,n)).catch(n.oe)},guide:function(){n.e("pages/index/component/guide").then(function(){return resolve(n("ada1"))}.bind(null,n)).catch(n.oe)},liveBroadcast:function(){n.e("pages/index/component/liveBroadcast").then(function(){return resolve(n("e04b"))}.bind(null,n)).catch(n.oe)},menus:function(){n.e("pages/index/component/menus").then(function(){return resolve(n("00fb"))}.bind(null,n)).catch(n.oe)},news:function(){n.e("pages/index/component/news").then(function(){return resolve(n("ed20"))}.bind(null,n)).catch(n.oe)},topic:function(){n.e("pages/index/component/topic").then(function(){return resolve(n("b890"))}.bind(null,n)).catch(n.oe)},presellList:function(){n.e("pages/index/component/presellList").then(function(){return resolve(n("e0b0"))}.bind(null,n)).catch(n.oe)},plantList:function(){n.e("pages/index/component/plantList").then(function(){return resolve(n("3ed8"))}.bind(null,n)).catch(n.oe)},pictureCube:function(){n.e("pages/index/component/pictureCube").then(function(){return resolve(n("dccb"))}.bind(null,n)).catch(n.oe)},shopList:function(){n.e("pages/index/component/shopList").then(function(){return resolve(n("1492"))}.bind(null,n)).catch(n.oe)},richText:function(){n.e("pages/index/component/richText").then(function(){return resolve(n("073f"))}.bind(null,n)).catch(n.oe)},seckill:function(){n.e("pages/index/component/seckill").then(function(){return resolve(n("53ab"))}.bind(null,n)).catch(n.oe)},swiperBg:function(){n.e("pages/index/component/swiperBg").then(function(){return resolve(n("9a0d"))}.bind(null,n)).catch(n.oe)},tabNav:function(){n.e("pages/index/component/tabNav").then(function(){return resolve(n("90d8"))}.bind(null,n)).catch(n.oe)},titles:function(){n.e("pages/index/component/titles").then(function(){return resolve(n("9995"))}.bind(null,n)).catch(n.oe)},hotRanking:function(){n.e("pages/index/component/hotRanking").then(function(){return resolve(n("65de"))}.bind(null,n)).catch(n.oe)}},data:function(){var e;return e={domain:v.HTTP_REQUEST_URL,couponTypeMsg:{10:"通用券",11:"品类券",12:"跨店券"},styleConfig:[],showSkeleton:!0,isNodes:0,privacyStatus:!1,errorNetwork:!1,userInfo:{},loading:!1,statusBarHeight:b,navIndex:0,navTop:[],subscribe:!1,followUrl:"",followHid:!0,followCode:!1,sortList:[],window:!1,navH:"",couponList:[],marTop:0,loadend:!1},(0,a.default)(e,"loading",!1),(0,a.default)(e,"loadTitle","加载更多"),(0,a.default)(e,"sortProduct",[]),(0,a.default)(e,"where",{pid:0,page:1,limit:6}),(0,a.default)(e,"is_switch",!0),(0,a.default)(e,"hostProduct",[]),(0,a.default)(e,"hotPage",1),(0,a.default)(e,"hotLimit",30),(0,a.default)(e,"hotScroll",!0),(0,a.default)(e,"hotLoading",!1),(0,a.default)(e,"hotTitle","加载更多"),(0,a.default)(e,"isFixed",!0),(0,a.default)(e,"isScrolled",!1),(0,a.default)(e,"scrolled",!1),(0,a.default)(e,"tempArr",[]),(0,a.default)(e,"d",""),(0,a.default)(e,"h",""),(0,a.default)(e,"m",""),(0,a.default)(e,"s",""),(0,a.default)(e,"sum_h",""),(0,a.default)(e,"sortMarTop",0),(0,a.default)(e,"globalDatas",{}),(0,a.default)(e,"mpHeight",108),(0,a.default)(e,"currSpid",""),(0,a.default)(e,"_options",{}),(0,a.default)(e,"isIntegral",!1),(0,a.default)(e,"appUpdate",{}),(0,a.default)(e,"sortMpTop",0),(0,a.default)(e,"bgColor",""),(0,a.default)(e,"bgPic",""),(0,a.default)(e,"bgTabVal",""),(0,a.default)(e,"windowHeight",0),(0,a.default)(e,"domHeight",0),(0,a.default)(e,"isHeaderSerch",!1),(0,a.default)(e,"showCoupon",!1),(0,a.default)(e,"couponArray",[]),(0,a.default)(e,"smallPage",!1),(0,a.default)(e,"isMenu",!1),(0,a.default)(e,"isScale",!1),(0,a.default)(e,"homeCombData",{}),(0,a.default)(e,"footerStatus",!1),(0,a.default)(e,"newData",{}),(0,a.default)(e,"activeRouter",""),(0,a.default)(e,"overflow",!1),(0,a.default)(e,"diyId",0),(0,a.default)(e,"preview",!1),(0,a.default)(e,"isSupport",!0),e},onShareAppMessage:function(){return o.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),{title:this.share_title,imageUrl:"",path:"/pages/index/index?spid="+this.uid}},onShareTimeline:function(){return{title:this.share_title,query:{spid:this.uid},imageUrl:""}},onLoad:function(t){var n=this;this._options=t,this.diyId=t.diyId||0,this.preview=!!t.time,n.$nextTick((function(){e.getSystemInfo({success:function(e){n.windowHeight=e.windowHeight}})})),n.pageLoad(t)},created:function(e){var t=getCurrentPages(),n=t[t.length-1].route;this.activeRouter="/"+n},onShow:function(){var t=this;t.isIntegral=e.getStorageSync("isIntegral"),t.getNav(),t.loadCoupon(),t.$nextTick((function(){var n=e.createSelectorQuery();n.select("#home").boundingClientRect(),n.exec((function(e){t.isScrolled=e[0].top<=-60}))}))},onHide:function(){e.setStorageSync("isIntegral",!1)},onReady:function(){},watch:{globalDatas:function(e,t){}},onPullDownRefresh:function(){this.overflow=!0,this.reconnect()},methods:{loadCoupon:function(){var t=this;this.showCoupon||e.getStorageSync("show_coupon")||!e.getStorageSync("is_new_user")||(0,f.getNewPeopleCouponLst)().then((function(n){t.couponArray=n.data,setTimeout((function(){t.showCoupon=t.couponArray.length>0,e.setStorageSync("show_coupon","1")}),1500)}))},pageLoad:function(e){if(e.spid?(this.currSpid=e.spid,w.globalData.spid=e.spid):(0,l.getStorage)("spid")&&(this.currSpid=(0,l.getStorage)("spid"),w.globalData.spid=(0,l.getStorage)("spid")),e.scene){var t=this.$util.getUrlParams(decodeURIComponent(e.scene));t.id&&(e.id=t.id),t.spid?(this.currSpid=t.spid,w.globalData.spid=t.spid):(0,l.getStorage)("spid")&&(this.currSpid=(0,l.getStorage)("spid"),w.globalData.spid=(0,l.getStorage)("spid"))}(0,m.default)(this.currSpid,this.isLogin),this.isLogin&&(0,g.silenceBindingSpread)(),this.reloadData(),Promise.all([this.diyData(0)]),this.isLogin&&this.getUserInfo()},closeShare:function(){e.setStorageSync("isIntegral",!1),this.isIntegral=e.getStorageSync("isIntegral")},bindHeighta:function(e){},reconnect:function(){var t=this;e.getNetworkType({success:function(e){t.errorNetwork="none"===e.networkType,t.errorNetwork?that.overflow=!1:t.pageLoad(t._options)}})},getNav:function(){var t=this;(0,c.getNavigation)().then((function(n){t.newData=n.data,t.newData.status&&t.newData.status.status?e.hideTabBar():e.showTabBar()}))},objToArr:function(e){var t=Object.keys(e).sort(),n=t.map((function(t){return e[t]}));return n},goRouter:function(t){var n=getCurrentPages(),o=n[n.length-1].$page.fullPath;t.link!=o&&e.switchTab({url:t.link,fail:function(n){e.redirectTo({url:t.link})}})},diyData:function(t){var n=this,o=this,i={id:t,did:o.diyId,version:"221"};o.styleConfig=[],o.smallPage=!1,(0,s.getDiy)(i).then((function(t){setTimeout((function(){o.isNodes++}),0),o.errorNetwork=!1;var i=t.data.data;e.setNavigationBarTitle({title:i.title}),i.is_bg_color&&(o.bgColor=i.color_picker),i.is_bg_pic?(o.bgPic=i.bg_pic,o.bgTabVal=i.bg_tab_val):o.bgPic="",o.styleConfig=o.objToArr(i.value),o.styleConfig.forEach((function(t,a,r){t.did=i.id,"headerSerch"!=t.name&&"homeComb"!=t.name||(o.isHeaderSerch=!0,"homeComb"==t.name&&(o.$set(o,"homeCombData",t),o.smallPage=!0)),"pageFoot"==t.name&&(t.status&&t.status.status&&(n.newData=t,setTimeout((function(e){o.$set(o,"footerStatus",!0)}),50)),e.setStorageSync("FOOTER_BAR",!(!t.status||!t.status.status)),t.menuList.map((function(t,n){"/pages/order_addcart/order_addcart"===t.link&&e.setStorageSync("FOOTER_ADDCART",n)})),r.splice(a,1)),"menus"==t.name&&(o.isMenu=!0),1==o.recommend_switch&&o.get_host_product(),e.pageScrollTo({scrollTop:0}),o.overflow=!1,e.stopPullDownRefresh()}))})).catch((function(t){e.showToast({title:t,icon:"none"}),e.stopPullDownRefresh()}))},changeDiy:function(t){var n=this;t?(n.styleConfig=[],(0,s.getPageDiy)({id:t,version:"221"}).then((function(t){var o=t.data.data;e.setNavigationBarTitle({title:o.title}),n.isScale=!0,o.is_bg_color&&(n.bgColor=o.color_picker),o.is_bg_pic?(n.bgPic=o.bg_pic,n.bgTabVal=o.bg_tab_val):n.bgPic="",n.styleConfig=n.objToArr(o.value),n.styleConfig.forEach((function(e,t,i){e.did=o.id,"headerSerch"!=e.name&&"homeComb"!=e.name&&"tabNav"!=e.name||n.styleConfig.splice(t,1),"menus"==e.name&&(n.isMenu=!0)})),n.isHeaderSerch=!0,n.isScale=!0,e.pageScrollTo({scrollTop:0}),e.stopPullDownRefresh()})).catch((function(t){n.styleConfig=[],e.stopPullDownRefresh(),e.showToast({title:t,icon:"none"})}))):(n.diyData(0),n.isScale=!1)},bindMore:function(){try{e.setStorageSync("storeIndex",this.navTop[this.navIndex].pid),e.switchTab({url:"/pages/goods_cate/goods_cate"})}catch(t){}},goDetails:function(t){var n=this;(0,u.goShopDetail)(t,this.uid).then((function(o){n.isLogin?(0,f.initiateAssistApi)(t.activity_id).then((function(t){var n=t.data.product_assist_set_id;e.hideLoading(),e.navigateTo({url:"/pages/activity/assist_detail/index?id="+n})})).catch((function(t){e.showToast({title:t,icon:"none"})})):toLogin()}))},getUserInfo:function(){var e=this;(0,r.getUserInfo)().then((function(t){e.userInfo=t.data}))},setVisit:function(){(0,r.setVisit)({url:"/pages/index/index"}).then((function(e){}))},changeTab:function(t){var n=this;this.navIndex!=t.index&&(this.navIndex=t.index,t.index>0&&((0,h.storeCategory)({pid:t.pid}).then((function(o){n.sortList=o.data.length>9?o.data.splice(0,9):o.data,n.sortList.length>0&&(n.where.pid=t.pid,n.where.page=1,n.loadend=!1,n.loading=!1,n.sortProduct=[],n.get_product_list(),e.pageScrollTo({scrollTop:0}))})),this.sortMarTop=10))},get_product_list:function(){var e=this;e.loading||(e.loading=!0,e.loadTitle="",(0,h.getProductslist)(e.where).then((function(t){var n=t.data.list,o=e.$util.SplitArray(n,e.sortProduct),i=n.length<e.where.limit;e.loadend=i,e.loading=!1,e.loadTitle=i?"已全部加载":"加载更多",e.$set(e,"sortProduct",o),e.$set(e.where,"page",e.where.page+1)})).catch((function(t){e.loading=!1,e.loadTitle="加载更多"})))},get_host_product:function(){var e=this,t=e.hotLimit;e.hotScroll&&(e.hotLoading||(e.hotLoading=!0,e.hotTitle="",(0,h.getProductHot)(e.hotPage,e.hotLimit).then((function(n){var o=n.data.list,i=e.$util.SplitArray(o,e.hostProduct),a=o.length<=t&&0!=o.length;e.hotScroll=a,e.hotLoading=!1,e.hotTitle=a?"加载更多":"已全部加载",e.$set(e,"hostProduct",i),e.$set(e,"hotPage",e.hotPage+1)}))))},getCateData:function(){var e=this;(0,s.getCateData)().then((function(t){t.data.unshift({cate_name:"首页"}),e.$set(e,"navTop",t.data)}))},reloadData:function(){var e=this;setTimeout((function(){e.showSkeleton=!1}),500)},goDetail:function(t){var n=this;!t.activity||"2"!==t.activity.type||this.isLogin?(0,u.goShopDetail)(t,this.uid).then((function(o){n.isLogin?(0,f.initiateAssistApi)(t.activity_id).then((function(t){var n=t.data.product_assist_set_id;e.hideLoading(),e.navigateTo({url:"/pages/activity/assist_detail/index?id="+n})})).catch((function(t){e.showToast({title:t,icon:"none"})})):toLogin()})):toLogin()}},mounted:function(){var t=this,n=e.createSelectorQuery().in(this);n.select("#home").boundingClientRect(),n.exec((function(e){t.domHeight=e[0].height}))},onReachBottom:function(){1==this.recommend_switch&&0==this.navIndex?this.get_host_product():1==this.navIndex&&this.sortProduct.length>0&&this.get_product_list()},onPageScroll:function(t){if(this.isHeaderSerch){var n;n=t.scrollTop>50,this.isScrolled=n}else this.isScrolled=!1;e.$emit("scroll")}};t.default=_}).call(this,n("543d")["default"],n("bc2e")["default"])},a242:function(e,t,n){},c403:function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("4c7d");o(n("66fd"));var i=o(n("e537"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},e537:function(e,t,n){"use strict";n.r(t);var o=n("f9be"),i=n("634d");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("5572");var r=n("f0c5"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"031a745a",null,!1,o["a"],void 0);t["default"]=s.exports},f9be:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={easyLoadimage:function(){return Promise.all([n.e("common/vendor"),n.e("components/easy-loadimage/easy-loadimage")]).then(n.bind(null,"2243"))}},i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.errorNetwork||1!=e.recommend_switch?null:e.hostProduct.length),o=e.errorNetwork?null:e.tempArr.length&&"promotionList"==e.styleConfig[e.styleConfig.length-1].name,i=!e.errorNetwork&&e.navIndex>0?e.sortList.length:null,a=!e.errorNetwork&&e.navIndex>0&&i>0?e.sortList.length:null,r=!e.errorNetwork&&e.navIndex>0?e.sortProduct.length:null,s=!e.errorNetwork&&e.navIndex>0&&r>0?e.sortProduct.length>0||e.sortProductLoading:null,c=!e.errorNetwork&&e.navIndex>0?e.sortProduct.length:null;e._isMounted||(e.e0=function(t){e.showCoupon=!1},e.e1=function(e){e.stopPropagation(),e.preventDefault()}),e.$mp.data=Object.assign({},{$root:{g0:n,g1:o,g2:i,g3:a,g4:r,g5:s,g6:c}})},a=[]}},[["c403","common/runtime","common/vendor"]]]);