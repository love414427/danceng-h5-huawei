(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/addGoods/addFreightTemplate"],{"30b5":function(e,t,i){"use strict";(function(e,t){var n=i("4ea4");i("4c7d");n(i("66fd"));var a=n(i("9aee"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(a.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},"348d":function(e,t,i){"use strict";i.r(t);var n=i("e8be"),a=i.n(n);for(var l in n)["default"].indexOf(l)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(l);t["default"]=a.a},"9aee":function(e,t,i){"use strict";i.r(t);var n=i("ec66"),a=i("348d");for(var l in a)["default"].indexOf(l)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(l);i("efc9");var r=i("f0c5"),o=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"31ca9924",null,!1,n["a"],void 0);t["default"]=o.exports},e8be:function(e,t,i){"use strict";(function(e){var n=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("9523")),l=i("5a8f"),r=i("0b33");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var c={components:{tip:function(){i.e("pages/product/components/tip").then(function(){return resolve(i("a356"))}.bind(null,i)).catch(i.oe)},areas:function(){Promise.all([i.e("common/vendor"),i.e("pages/product/components/areas")]).then(function(){return resolve(i("ff2f"))}.bind(null,i)).catch(i.oe)},distributionArea:function(){i.e("pages/product/components/distributionArea").then(function(){return resolve(i("0d3b"))}.bind(null,i)).catch(i.oe)},parcelArea:function(){i.e("pages/product/components/parcelArea").then(function(){return resolve(i("bcfe"))}.bind(null,i)).catch(i.oe)}},data:function(){return{mer_id:"",shipping_id:"",billingData:{name:"",type:0,appoint:0,undelivery:0,info:"",sort:"",region:[],undelives:{city_id:[]},free:[]},popup:{show:!1,showParael:!1},allReadySelect:[],billing:{list:[{value:"0",label:"按件数"},{value:"1",label:"按重量"},{value:"2",label:"按体积"}],specifiedArea:[{value:"1",label:"自定义"},{value:"2",label:"开启"},{value:"0",label:"关闭"}]}}},watch:{billingData:{handler:function(e){},deep:!0}},onLoad:function(e){this.mer_id=e.mer_id,this.shipping_id=e.shipping_id,this.shipping_id&&this.getShippingData()},methods:{getShippingData:function(){var t=this;e.showLoading({title:"加载中"}),(0,r.templateDetail)(t.mer_id,t.shipping_id).then((function(i){e.hideLoading();var n=i.data;t.billingData=n,t.getCityList(t.billingData.region),t.getCityList(t.billingData.free),t.billingData.undelives&&t.billingData.undelives.city_name.length>0?(t.allReadySelect=t.billingData.undelives.city_name,t.billingData.undelives["city_id"]=t.billingData.undelives.city_name.map((function(e){return e.id}))):t.billingData.undelives["city_id"]=[0]})).catch((function(e){t.$util.Tips({title:e})}))},getCityList:function(e){if(e.length>0)return e.forEach((function(e,t){Array.isArray(e["city_id"])||(e["city_id"]=[],e["city_name"].forEach((function(t,i){0==t.length?e["city_id"]=[0]:e["city_id"].push(t.id)})))})),e},changeType:function(e){this.billingData.type=e.detail.value},changeArea:function(e){this.billingData.undelivery=e.detail.value},selectArea:function(){this.$refs.area_popup.open()},close:function(){this.$refs.area_popup.close()},handleGetSelectArea:function(e){this.billingData.undelives||(this.billingData.undelives={}),this.billingData.undelives["city_id"]=e.map((function(e){return e.id})),this.allReadySelect=e,this.$refs.area_popup.close()},switchChange:function(e){e.target.value?this.billingData.appoint=1:this.billingData.appoint=0},getData:function(e){this.$set(this.billingData,"region",e),this.$set(this.popup,"show",!1)},getFreeData:function(e){this.$set(this.billingData,"free",e),this.$set(this.popup,"showParael",!1)},save:function(){var t=this,i=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){(0,a.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.billingData);return i.name?i.info?0==i.region.length?t.$util.Tips({title:"请编辑配送区域及运费"}):1==i.appoint&&0==i.free.length?t.$util.Tips({title:"请编辑包邮区域"}):1!=i.undelivery||i.undelives?void(t.shipping_id?(0,r.templateUpdate)(t.mer_id,t.shipping_id,i).then((function(i){t.$util.Tips({title:i.message,icon:"success"}),setTimeout((function(){e.redirectTo({url:"/pages/product/addGoods/freightTemplate?mer_id=".concat(t.mer_id)})}),1e3)})).catch((function(e){(0,l.Toast)(e)})):(0,r.templateCreate)(this.mer_id,i).then((function(i){t.$util.Tips({title:i.message,icon:"success"}),e.redirectTo({url:"/pages/product/addGoods/freightTemplate?mer_id=".concat(t.mer_id)})})).catch((function(e){(0,l.Toast)(e)}))):t.$util.Tips({title:"请编辑不包邮区域"}):t.$util.Tips({title:"请输入运费说明"}):t.$util.Tips({title:"请输入模板名称"})},goDistributionArea:function(){this.$set(this.popup,"show",!0),this.$refs.distributionArea.initListData()},closeDistribution:function(){this.$set(this.popup,"show",!1)},goarcelArea:function(){this.$set(this.popup,"showParael",!0),this.$refs.parcelArea.initParcelData()},closeParcel:function(){this.$set(this.popup,"showParael",!1)}}};t.default=c}).call(this,i("543d")["default"])},ec66:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return l})),i.d(t,"a",(function(){return n}));var n={uniPopup:function(){return i.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(i.bind(null,"b4af"))}},a=function(){var e=this.$createElement,t=(this._self._c,"1"==this.billingData.undelivery?this.allReadySelect.length:null),i="1"==this.billingData.undelivery&&t?this.allReadySelect.map((function(e){return e.name})).join(","):null;this.$mp.data=Object.assign({},{$root:{g0:t,g1:i}})},l=[]},efc9:function(e,t,i){"use strict";var n=i("f5b5"),a=i.n(n);a.a},f5b5:function(e,t,i){}},[["30b5","common/runtime","common/vendor"]]]);