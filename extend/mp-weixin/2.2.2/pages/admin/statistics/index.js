(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/statistics/index"],{2221:function(e,t,i){"use strict";i.r(t);var n=i("4e0d"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},2810:function(e,t,i){"use strict";i.r(t);var n=i("2d92"),a=i("2221");for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("cc23");var r=i("f0c5"),o=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=o.exports},"2d92":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return n}));var n={uniCalendar:function(){return Promise.all([i.e("common/vendor"),i.e("components/uni-calendar/uni-calendar")]).then(i.bind(null,"7512"))}},a=function(){var e=this.$createElement;this._self._c},s=[]},"2de4":function(e,t,i){"use strict";(function(e,t){var n=i("4ea4");i("4c7d");n(i("66fd"));var a=n(i("2810"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(a.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},"4e0d":function(e,t,i){"use strict";(function(e){var n=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(i("d437")),s=i("316e"),r=null,o=(new Date).getFullYear(),h=(new Date).getMonth()+1,c=(new Date).getDate(),d={name:"Statistics",components:{uniCalendar:function(){Promise.all([i.e("common/vendor"),i.e("components/uni-calendar/uni-calendar")]).then(function(){return resolve(i("7512"))}.bind(null,i)).catch(i.oe)}},props:{},data:function(){return{isShowBox:!0,showChart:!1,value:[[o,h,c-1],[o,h,c]],isrange:!0,weekSwitch:!1,ismulti:!1,monFirst:!0,clean:!1,lunar:!1,renderValues:[],monthRange:[],current:!1,where:{start:"",stop:"",type:""},types:"",time:"",title:"",growth_rate:"",increase_time:"",increase_time_status:"",time_price:"",order_num:"",loaded:!1,loading:!1,filter:{page:1,limit:10,start:"",stop:""},list:[],cWidth:"",cHeight:"",pixelRatio:1,textarea:"",LineA:{categories:["2012","2013","2014","2015","2016","2017"],series:[{data:[35,8,25,37,4,20]}]},info:{startDate:"",endDate:"",lunar:!1,range:!0,insert:!1,selected:[],showMonth:!1},merId:""}},watch:{"$route.params":function(e){void 0!=e&&(this.setType(e.type),this.setTime(e.time),this.getIndex())}},onLoad:function(t){this.merId=t.merId,this.setType(t.type),this.setTime(t.time),this.cWidth=e.upx2px(690),this.cHeight=e.upx2px(500),this.getInfo()},computed:{monthRangeText:function(){return this.monthRange.length?"固定":"指定范围"}},methods:{getIndex:function(){var e=[],t=[],i=this;1==i.where.type?(0,s.turnoverStatistics)(i.where,i.merId).then((function(n){var a=n.data.chart,s=[],r=[];a.forEach((function(e){s.push(e.time),r.push(e.num)})),i.growth_rate=n.data.growth_rate,i.increase_time=n.data.increase_time,i.increase_time_status=n.data.increase_time_status,i.time_price=n.data.time,n.data.chart.forEach((function(i,n){e.push(i.time),t.push(i.num)})),i.LineA.categories=e,i.LineA.series[0].data=t,i.showLineA("canvasLineA",i.LineA)}),(function(e){i.$dialog.error(e.msg)})):(0,s.orderNumberStatistics)(i.where,this.merId).then((function(n){var a=n.data.chart,s=[],r=[];a.forEach((function(e){s.push(e.time),r.push(e.num)})),i.growth_rate=n.data.growth_rate,i.increase_time=n.data.increase_time,i.increase_time_status=n.data.increase_time_status,i.time_price=n.data.time,n.data.chart.forEach((function(i,n){e.push(i.time),t.push(i.num)})),i.LineA.categories=e,i.LineA.series[0].data=t,i.showLineA("canvasLineA",i.LineA)}),(function(e){i.$dialog.error(e.msg)}))},setTime:function(e){this.time=e,this.showChart=!0;var t=(new Date).getFullYear(),i=(new Date).getMonth()+1,n=(new Date).getDate();switch(this.list=[],this.filter.page=1,this.loaded=!1,this.loading=!1,e){case"today":this.showChart=!1,this.where.start=new Date(Date.parse(t+"/"+i+"/"+n)).getTime()/1e3,this.where.stop=new Date(Date.parse(t+"/"+i+"/"+n)).getTime()/1e3+86400-1,this.where.month=0,this.title="今日",this.getIndex(),this.getInfo();break;case"yesterday":this.showChart=!1,this.where.start=new Date(Date.parse(t+"/"+i+"/"+n)).getTime()/1e3-86400,this.where.stop=new Date(Date.parse(t+"/"+i+"/"+n)).getTime()/1e3-1,this.where.month=0,this.title="昨日",this.getIndex(),this.getInfo();break;case"month":this.where.start=new Date(t,(new Date).getMonth(),1).getTime()/1e3,this.where.stop=new Date(t,i,1).getTime()/1e3-1,this.title="本月",this.where.month=1,this.getIndex(),this.getInfo();break;case"seven":this.where.start=new Date(Date.parse(t+"/"+i+"/"+n)).getTime()/1e3+86400-604800,this.where.stop=new Date(Date.parse(t+"/"+i+"/"+n)).getTime()/1e3+86400-1,this.title="七日",this.where.month=0,this.getIndex(),this.getInfo();break}},setType:function(e){switch(e){case"price":this.where.type=1;break;case"order":this.where.type=2;break}},dateTitle:function(){this.isShowBox=!1,this.$refs.calendar.open(),this.time="date",this.title="自定义",this.where.month=0},close:function(){this.current=!1,this.isShowBox=!0},getInfo:function(){var e=this;e.loading||e.loaded||(e.loading=!0,e.filter.start=e.where.start,e.filter.stop=e.where.stop,(0,s.orderPrice)(e.filter,this.merId).then((function(t){e.loading=!1,e.loaded=t.data.length<e.filter.limit,e.list.push.apply(e.list,t.data),e.filter.page=e.filter.page+1}),(function(t){e.$dialog.message(t.msg)})))},showLineA:function(e,t){r=new a.default({$this:this,canvasId:e,type:"line",fontSize:11,padding:[15,15,0,15],legend:{show:!1,padding:5,lineHeight:11,margin:5},dataLabel:!0,dataPointShape:!0,dataPointShapeType:"hollow",background:"#FFFFFF",pixelRatio:this.pixelRatio,categories:t.categories,series:t.series,animation:!0,enableScroll:!0,xAxis:{disableGrid:!1,type:"grid",gridType:"dash",itemCount:4,scrollShow:!0,scrollAlign:"left"},yAxis:{gridType:"dash",splitNumber:8,min:0,max:30,format:function(e){return e.toFixed(0)}},width:this.cWidth*this.pixelRatio,height:this.cHeight*this.pixelRatio,extra:{line:{type:"straight"}}})},touchLineA:function(e){r.scrollStart(e)},moveLineA:function(e){r.scroll(e)},touchEndLineA:function(e){r.scrollEnd(e)},confirm:function(e){if(e.range.after&&e.range.before){var t=new Date(e.range.after+" 00:00:00").getTime()/1e3,i=new Date(e.range.before+" 00:00:00").getTime()/1e3;this.where.start=t<i?t:i,this.where.stop=(i>t?i:t)-1+86400,this.where.month=0,this.list=[],this.filter.page=1,this.loaded=!1,this.loading=!1,this.isShowBox=!0,Promise.all([this.getIndex(),this.getInfo()])}}},onReachBottom:function(){this.getInfo()}};t.default=d}).call(this,i("543d")["default"])},"6ec1":function(e,t,i){},cc23:function(e,t,i){"use strict";var n=i("6ec1"),a=i.n(n);a.a}},[["2de4","common/runtime","common/vendor"]]]);