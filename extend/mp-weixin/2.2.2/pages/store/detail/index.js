(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/store/detail/index"],{2224:function(t,e,o){"use strict";(function(t){var n=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("9523")),r=o("26cb"),s=o("3255"),c=o("736f"),a=o("f26a"),u=o("ddb3");function f(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}getApp();var l={computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?f(Object(o),!0).forEach((function(e){(0,i.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},(0,s.configMap)({margin_ico_switch:0,margin_ico:""},(0,r.mapGetters)(["isLogin","uid","viewColor","keyColor"]))),filters:{dateFormat:function(t){return t?t.split(" ")[0]:""}},data:function(){return{domain:a.HTTP_REQUEST_URL,id:0,store:{},score:0,star:0,popupShow:!1,storeCode:"",openSettingBtnHidden:!0,mer_location:""}},onLoad:function(e){var o=this;t.getStorage({key:"GLOBAL_DATA",success:function(t){o.mer_location=t.data.mer_location}}),this.id=e.mer_id||e.id,this.getStore(),this.getStoreCode()},onReady:function(){},mounted:function(){},methods:{call:function(){var e=this;if(!e.store.service_phone)return e.$util.Tips({title:"暂无可用客服"});t.showModal({title:"提示",content:"暂无在线客服，确定拨打客服电话:"+e.store.service_phone+"吗？",success:function(o){o.confirm&&t.makePhoneCall({phoneNumber:e.store.service_phone})}})},getStore:function(){var t=this;(0,c.getStoreDetail)(this.id).then((function(e){var o=e.data;t.store=o,t.score=(parseFloat(o.postage_score)+parseFloat(o.product_score)+parseFloat(o.service_score))/3,t.star=t.score/5*100}))},goChat:function(){this.isLogin?t.navigateTo({url:"/pages/chat/customer_list/chat?mer_id=".concat(this.store.mer_id,"&uid=").concat(this.uid)}):(0,u.toLogin)()},follow:function(){var t=this;(0,c.followStore)(this.id).then((function(e){200===e.status&&(t.store.care=!0),t.$util.Tips({title:e.message})}))},showMaoLocation:function(e,o){if(!e||!o)return this.$util.Tips({title:"请设置允许商城访问您的位置！"});t.openLocation({latitude:parseFloat(e),longitude:parseFloat(o),scale:8,geocode:!0,name:this.store.mer_name,address:this.store.mer_address?this.store.mer_address:"",success:function(t){}})},unfollow:function(){var t=this;(0,c.unfollowStore)(this.id).then((function(e){200===e.status&&(t.store.care=!1),t.$util.Tips({title:e.message})}))},followToggle:function(){this.store.care?this.unfollow():this.follow()},getStoreCode:function(){var t,e=this;t={type:"routine"},(0,c.merchantQrcode)(this.id,t).then((function(t){e.storeCode=t.data.url})).catch((function(t){}))},savePosterPath:function(e){t.downloadFile({url:e,success:function(e){if(200!==e.statusCode)return t.showToast({title:e.errMsg});t.getSetting({success:function(o){o.authSetting["scope.writePhotosAlbum"]?t.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(e){return t.showToast({title:"保存成功！"})},fail:function(e){return t.showToast({title:e.errMsg})},complete:function(t){}}):t.authorize({scope:"scope.writePhotosAlbum",success:function(){t.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(e){return t.showToast({title:"保存成功！"})},fail:function(e){return t.showToast({title:e.errMsg})},complete:function(t){}})},fail:function(){t.showModal({title:"您已拒绝获取相册权限",content:"是否进入权限管理，调整授权？",success:function(e){if(e.confirm)t.openSetting({success:function(t){}});else if(e.cancel)return t.showToast({title:"已取消！"})}})}})},fail:function(t){}})},fail:function(e){return t.showToast({title:e.errMsg})}})}}};e.default=l}).call(this,o("543d")["default"])},2786:function(t,e,o){"use strict";(function(t,e){var n=o("4ea4");o("4c7d");n(o("66fd"));var i=n(o("34adf"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(i.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},"34adf":function(t,e,o){"use strict";o.r(e);var n=o("8faa"),i=o("8385");for(var r in i)["default"].indexOf(r)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(r);o("eae4");var s=o("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"3115d066",null,!1,n["a"],void 0);e["default"]=c.exports},8385:function(t,e,o){"use strict";o.r(e);var n=o("2224"),i=o.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"8faa":function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,o=(t._self._c,t.store.care_count<1e4?null:(t.store.care_count/1e4).toFixed(2)),n=t.star.toFixed(2),i=t.score.toFixed(1),r=t._f("dateFormat")(t.store.create_time);t._isMounted||(t.e0=function(e){t.popupShow=!0},t.e1=function(e){t.popupShow=!1}),t.$mp.data=Object.assign({},{$root:{g0:o,g1:n,g2:i,f0:r}})},i=[]},eae4:function(t,e,o){"use strict";var n=o("f0ff"),i=o.n(n);i.a},f0ff:function(t,e,o){}},[["2786","common/runtime","common/vendor"]]]);