(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/user_goods_collection/index"],{"03d5":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i("736f"),n=i("f823"),c=i("041f"),l=i("26cb"),a=i("3255"),s=i("f26a"),r=i("ddb3"),d={components:{easyLoadimage:function(){Promise.all([i.e("common/vendor"),i.e("components/easy-loadimage/easy-loadimage")]).then(function(){return resolve(i("2243"))}.bind(null,i)).catch(i.oe)}},data:function(){return{hostProduct:[],loadTitle:"加载更多",loading:!1,loadend:!1,collectProductList:[],checkedArr:[],limit:10,page:1,hotScroll:!1,hotPage:1,hotLimit:10,domain:s.HTTP_REQUEST_URL,storeList:[],isScroll:!0,storePage:1,storeLimit:10,total:0,isEdit:!1,isAllSelect:!1,tabIndex:1,tabList:[{title:"商品"},{title:"店铺"}]}},computed:(0,a.configMap)({recommend_switch:0,hide_mer_status:0},(0,l.mapGetters)(["isLogin","viewColor","keyColor"])),onLoad:function(t){this.tabIndex=t.tab||1,this.isLogin?(this.get_user_collect_product(),this.getList()):(0,r.toLogin)()},methods:{handleEdit:function(){this.isEdit=!this.isEdit},goStore:function(e){1!=this.hide_mer_status&&t.navigateTo({url:"/pages/store/home/index?id=".concat(e.merchant.mer_id)})},goDetail:function(e){var i=this;(0,n.goShopDetail)(e,this.uid).then((function(o){i.isLogin?(0,c.initiateAssistApi)(e.activity_id).then((function(e){var i=e.data.product_assist_set_id;t.hideLoading(),t.navigateTo({url:"/pages/activity/assist_detail/index?id="+i})})).catch((function(e){t.showToast({title:e,icon:"none"})})):(0,r.toLogin)()}))},bindTab:function(t){this.tabIndex=t+1},bindDetele:function(e,i){var n=this;(0,o.userCollectDel)({type:10,type_id:[e.type_id]}).then((function(e){t.showToast({title:"已取消",icon:"none"}),n.storeList.splice(i,1)}))},getList:function(){var t=this;this.isScroll&&(0,o.getMerchantLst)({page:this.storePage,limit:this.storeLimit}).then((function(e){t.isScroll=e.data.list.length>=t.limit,t.storeList=t.storeList.concat(e.data.list),t.storePage+=1}))},get_user_collect_product:function(){var t=this;t.loading||t.loadend||(t.loading=!0,t.loadTitle="",(0,o.getCollectUserList)({page:t.page,limit:t.limit}).then((function(e){t.total=e.data.count;var i=e.data.list,o=i.length<t.limit;i.forEach((function(e,i){e.check||t.$set(e,"check",!1)})),t.collectProductList=t.$util.SplitArray(i,t.collectProductList),t.$set(t,"collectProductList",t.collectProductList),t.loadend=o,t.loadTitle=o?"我也是有底线的":"加载更多",t.page=t.page+1,t.loading=!1})).catch((function(e){t.loading=!1,t.loadTitle="加载更多"})))},subCollect:function(){var t=this;(0,o.userCollectDel)({type:1,type_id:t.getSelectGoods()}).then((function(e){return t.$util.Tips({title:"取消收藏成功",icon:"success"},(function(){t.reloadData()}))})).catch((function(e){return t.$util.Tips({title:e})}))},reloadData:function(){var t=this;this.checkedArr.forEach((function(e,i){t.collectProductList=t.collectProductList.filter((function(t){return t!=e}))})),this.total-=this.checkedArr.length},collectCheck:function(t){t.check=!t.check,this.cartAllCheck("goodsCheck")},checkboxAllChange:function(){this.isAllSelect=!this.isAllSelect,this.cartAllCheck("allCheck")},cartAllCheck:function(t){var e=this,i=[];this.collectProductList.forEach((function(o,n){"goodsCheck"==t||(o.check=e.isAllSelect),o.check&&i.push(o)})),this.checkedArr=i,this.isAllSelect=i.length==this.collectProductList.length},getSelectGoods:function(){var t=[];return this.collectProductList.forEach((function(e,i){e.check&&t.push(e.type_id)})),t}},onReachBottom:function(){1==this.tabIndex?this.get_user_collect_product():this.getList()},onPageScroll:function(e){t.$emit("scroll")}};e.default=d}).call(this,i("543d")["default"])},"2a57":function(t,e,i){"use strict";(function(t,e){var o=i("4ea4");i("4c7d");o(i("66fd"));var n=o(i("b6f3"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(n.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},"625e":function(t,e,i){"use strict";var o=i("995c"),n=i.n(o);n.a},"995c":function(t,e,i){},"9f30":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return c})),i.d(e,"a",(function(){return o}));var o={easyLoadimage:function(){return Promise.all([i.e("common/vendor"),i.e("components/easy-loadimage/easy-loadimage")]).then(i.bind(null,"2243"))}},n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.collectProductList.length&&1==t.tabIndex),o=1==t.tabIndex?t.collectProductList.length:null,n=1==t.tabIndex?t.isEdit&&t.collectProductList.length>0:null,c=1!=t.tabIndex?t.storeList.length:null,l=1!=t.tabIndex&&c>0?t.__map(t.storeList,(function(e,i){var o=t.__get_orig(e),n=1!=e.merchant.is_del&&0!=e.merchant.mer_state&&0!=e.merchant.status?e.merchant&&e.merchant.showProduct.length>0:null;return{$orig:o,g4:n}})):null,a=!t.collectProductList.length&&1==t.tabIndex||!t.storeList.length&&2==t.tabIndex;t.$mp.data=Object.assign({},{$root:{g0:i,g1:o,g2:n,g3:c,l0:l,g5:a}})},c=[]},b6f3:function(t,e,i){"use strict";i.r(e);var o=i("9f30"),n=i("ed4a");for(var c in n)["default"].indexOf(c)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(c);i("625e");var l=i("f0c5"),a=Object(l["a"])(n["default"],o["b"],o["c"],!1,null,"fbc370f6",null,!1,o["a"],void 0);e["default"]=a.exports},ed4a:function(t,e,i){"use strict";i.r(e);var o=i("03d5"),n=i.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(c);e["default"]=n.a}},[["2a57","common/runtime","common/vendor"]]]);