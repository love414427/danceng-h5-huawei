(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/comment"],{"00c4":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("3fd7"),o=n("6859"),l=n("26cb"),s=n("3255"),a=n("f26a"),c=n("ddb3"),u={props:{isShow:{type:Boolean,default:!1},bottom:{type:Number,default:0},userInfo:{type:Object,default:function(){}}},components:{Loading:function(){n.e("components/Loading/index").then(function(){return resolve(n("a869"))}.bind(null,n)).catch(n.oe)},bindmobile:function(){Promise.all([n.e("common/vendor"),n.e("components/bindmobile")]).then(function(){return resolve(n("5802"))}.bind(null,n)).catch(n.oe)}},computed:(0,s.configMap)({community_reply_auth:0},(0,l.mapGetters)(["isLogin","viewColor"])),data:function(){return{domain:a.HTTP_REQUEST_URL,content:"",id:"",list:[],loaded:!1,loading:!1,where:{page:1,limit:10},reply_id:"",placeholder:"快来说点儿什么吧...",isChild:!1,index:0,listIndex:0,focus:!1,all:0}},methods:{close:function(){this.$emit("close")},onTouchmove:function(e){var n=this;if(!this.loadend&&!this.loading){var i=t.createSelectorQuery().in(this);i.select("#reply").boundingClientRect((function(t){t.bottom<1500&&t.top<0&&n.getList()})).exec()}},getData:function(t,e){this.id=t.community_id,this.loading=this.loaded=!1,this.where.page=1,this.list=[],this.getList(),this.listIndex=e},getList:function(){var t=this;t.loading||t.loaded||(t.loading=!0,(0,i.replyLstApi)(t.id,t.where).then((function(e){t.loading=!1,t.all=e.data.all,t.loaded=e.data.list.length<t.where.limit,t.list.push.apply(t.list,e.data.list),t.where.page=t.where.page+1}),(function(e){t.$util.Tips({title:e.msg})})))},submitComment:function(){!1===this.isLogin?(0,c.toLogin)():this.getUserInfo()},getUserInfo:function(){var t=this;(0,o.getUserInfo)().then((function(e){e.data.phone||0==t.community_reply_auth?t.createReply():t.$refs.bindmobile.open()}))},createReply:function(){var e=this,n=e.reply_id?e.reply_id:0;(0,i.replyCreateApi)(e.id,{content:e.content,reply_id:n}).then((function(t){e.$util.Tips({title:t.message}),1==t.data.status&&(e.isChild?e.list[e.index]["children"]?e.list[e.index]["children"].push(t.data):e.list[e.index]["children"]=[t.data]:e.list.unshift(t.data),e.all++),e.content="",e.$util.Tips({title:t.message}),e.$emit("successFul",e.listIndex),e.loseFocus()})).catch((function(e){t.showToast({title:e,icon:"none"})}))},toReply:function(t,e){this.content="",this.placeholder="回复："+t.author.nickname,this.reply_id=t.reply_id,this.isChild=!0,this.index=e,this.focus=!0},loseFocus:function(){this.focus=!1,this.reply_id=0,this.placeholder="快来说点儿什么吧...",this.isChild=!1},starComment:function(e){var n=this,o=e.relevance_id?0:1;(0,i.starCommentApi)(e.reply_id,{status:o}).then((function(t){200===t.status&&(e.relevance_id?(e.count_start--,e.count_start=0==e.count_start?0:e.count_start,e.relevance_id=!1):(e.count_start++,e.relevance_id=!0)),n.$util.Tips({title:t.message})})).catch((function(e){t.showToast({title:e,icon:"none"})}))},closepoup:function(){this.$refs.bindmobile.close()}}};e.default=u}).call(this,n("543d")["default"])},1796:function(t,e,n){"use strict";var i=n("4d2c"),o=n.n(i);o.a},"217a":function(t,e,n){"use strict";n.r(e);var i=n("00c4"),o=n.n(i);for(var l in i)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(l);e["default"]=o.a},"4d2c":function(t,e,n){},"633e":function(t,e,n){"use strict";n.r(e);var i=n("d04f"),o=n("217a");for(var l in o)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(l);n("1796");var s=n("f0c5"),a=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"175be26a",null,!1,i["a"],void 0);e["default"]=a.exports},d04f:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return i}));var i={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"b4af"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.list.length),i=n>0?t.__map(t.list,(function(e,n){var i=t.__get_orig(e),o=e.children&&e.children.length>0;return{$orig:i,g1:o}})):null,o=0==t.list.length&&!t.loading;t.$mp.data=Object.assign({},{$root:{g0:n,l0:i,g2:o}})},l=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/comment-create-component',
    {
        'components/comment-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("633e"))
        })
    },
    [['components/comment-create-component']]
]);
