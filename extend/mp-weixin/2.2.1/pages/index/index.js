(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0f9c":function(t,e,n){"use strict";var o=n("b297"),i=n.n(o);i.a},"468a":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={easyLoadimage:function(){return Promise.all([n.e("common/vendor"),n.e("components/easy-loadimage/easy-loadimage")]).then(n.bind(null,"2243"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.errorNetwork||1!=t.recommend_switch?null:t.hostProduct.length),o=t.errorNetwork?null:t.tempArr.length&&"promotionList"==t.styleConfig[t.styleConfig.length-1].name,i=!t.errorNetwork&&t.navIndex>0?t.sortList.length:null,a=!t.errorNetwork&&t.navIndex>0&&i>0?t.sortList.length:null,s=!t.errorNetwork&&t.navIndex>0?t.sortProduct.length:null,r=!t.errorNetwork&&t.navIndex>0&&s>0?t.sortProduct.length>0||t.sortProductLoading:null,c=!t.errorNetwork&&t.navIndex>0?t.sortProduct.length:null;t._isMounted||(t.e0=function(e){t.showCoupon=!1},t.e1=function(t){t.stopPropagation(),t.preventDefault()}),t.$mp.data=Object.assign({},{$root:{g0:n,g1:o,g2:i,g3:a,g4:s,g5:r,g6:c}})},a=[]},"634d":function(t,e,n){"use strict";n.r(e);var o=n("9cb1"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},"9cb1":function(t,e,n){"use strict";(function(t,o){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("9523")),s=n("6859"),r=n("58d4"),c=n("cd6d"),u=n("5a8f"),l=(n("937f"),n("f823")),d=n("26cb"),h=n("736f"),f=n("041f"),g=n("3255"),p=i(n("c5df")),m=i(n("9673")),v=n("f26a"),b=t.getSystemInfoSync().statusBarHeight+"px",w=getApp(),S={computed:(0,g.configMap)({hide_mer_status:0,recommend_switch:0,beian_sn:"",share_title:"",share_pic:"",site_name:"",hot_ranking_switch:0,navigation:{}},(0,d.mapGetters)(["isLogin","uid","keyColor"])),mixins:[p.default],components:{easyLoadimage:function(){Promise.all([n.e("common/vendor"),n.e("components/easy-loadimage/easy-loadimage")]).then(function(){return resolve(n("2243"))}.bind(null,n)).catch(n.oe)},recommend:function(){Promise.all([n.e("common/vendor"),n.e("components/recommend/index")]).then(function(){return resolve(n("1857"))}.bind(null,n)).catch(n.oe)},authorize:function(){Promise.all([n.e("common/vendor"),n.e("components/Authorize")]).then(function(){return resolve(n("02f6"))}.bind(null,n)).catch(n.oe)},customTab:function(){n.e("components/customTab").then(function(){return resolve(n("40b7"))}.bind(null,n)).catch(n.oe)},passwordPopup:function(){Promise.all([n.e("common/vendor"),n.e("components/passwordPopup/index")]).then(function(){return resolve(n("5edd"))}.bind(null,n)).catch(n.oe)},activeParty:function(){n.e("pages/index/component/activeParty").then(function(){return resolve(n("f382"))}.bind(null,n)).catch(n.oe)},headerSerch:function(){n.e("pages/index/component/headerSerch").then(function(){return resolve(n("bf71"))}.bind(null,n)).catch(n.oe)},homeComb:function(){n.e("pages/index/component/homeComb").then(function(){return resolve(n("f9a3"))}.bind(null,n)).catch(n.oe)},bargain:function(){n.e("pages/index/component/bargain").then(function(){return resolve(n("d20a"))}.bind(null,n)).catch(n.oe)},coupon:function(){n.e("pages/index/component/coupon").then(function(){return resolve(n("ac25"))}.bind(null,n)).catch(n.oe)},blankPage:function(){n.e("pages/index/component/blankPage").then(function(){return resolve(n("a529"))}.bind(null,n)).catch(n.oe)},combination:function(){n.e("pages/index/component/combination").then(function(){return resolve(n("14da"))}.bind(null,n)).catch(n.oe)},customerService:function(){n.e("pages/index/component/customerService").then(function(){return resolve(n("07c4"))}.bind(null,n)).catch(n.oe)},goodList:function(){n.e("pages/index/component/goodList").then(function(){return resolve(n("7b84"))}.bind(null,n)).catch(n.oe)},guide:function(){n.e("pages/index/component/guide").then(function(){return resolve(n("ada1"))}.bind(null,n)).catch(n.oe)},liveBroadcast:function(){n.e("pages/index/component/liveBroadcast").then(function(){return resolve(n("e04b"))}.bind(null,n)).catch(n.oe)},menus:function(){n.e("pages/index/component/menus").then(function(){return resolve(n("00fb"))}.bind(null,n)).catch(n.oe)},news:function(){n.e("pages/index/component/news").then(function(){return resolve(n("ed20"))}.bind(null,n)).catch(n.oe)},topic:function(){n.e("pages/index/component/topic").then(function(){return resolve(n("b890"))}.bind(null,n)).catch(n.oe)},presellList:function(){n.e("pages/index/component/presellList").then(function(){return resolve(n("e0b0"))}.bind(null,n)).catch(n.oe)},plantList:function(){n.e("pages/index/component/plantList").then(function(){return resolve(n("3ed8"))}.bind(null,n)).catch(n.oe)},pictureCube:function(){n.e("pages/index/component/pictureCube").then(function(){return resolve(n("dccb"))}.bind(null,n)).catch(n.oe)},shopList:function(){n.e("pages/index/component/shopList").then(function(){return resolve(n("1492"))}.bind(null,n)).catch(n.oe)},richText:function(){n.e("pages/index/component/richText").then(function(){return resolve(n("073f"))}.bind(null,n)).catch(n.oe)},seckill:function(){n.e("pages/index/component/seckill").then(function(){return resolve(n("53ab"))}.bind(null,n)).catch(n.oe)},swiperBg:function(){n.e("pages/index/component/swiperBg").then(function(){return resolve(n("9a0d"))}.bind(null,n)).catch(n.oe)},tabNav:function(){n.e("pages/index/component/tabNav").then(function(){return resolve(n("90d8"))}.bind(null,n)).catch(n.oe)},titles:function(){n.e("pages/index/component/titles").then(function(){return resolve(n("9995"))}.bind(null,n)).catch(n.oe)},hotRanking:function(){n.e("pages/index/component/hotRanking").then(function(){return resolve(n("65de"))}.bind(null,n)).catch(n.oe)}},data:function(){var t;return t={domain:v.HTTP_REQUEST_URL,couponTypeMsg:{10:"通用券",11:"品类券",12:"跨店券"},styleConfig:[],showSkeleton:!0,isNodes:0,privacyStatus:!1,errorNetwork:!1,userInfo:{},loading:!1,isAuto:!1,isShowAuth:!1,statusBarHeight:b,navIndex:0,navTop:[],subscribe:!1,followUrl:"",followHid:!0,followCode:!1,sortList:[],window:!1,navH:"",couponList:[],marTop:0,loadend:!1},(0,a.default)(t,"loading",!1),(0,a.default)(t,"loadTitle","加载更多"),(0,a.default)(t,"sortProduct",[]),(0,a.default)(t,"where",{pid:0,page:1,limit:6}),(0,a.default)(t,"is_switch",!0),(0,a.default)(t,"hostProduct",[]),(0,a.default)(t,"hotPage",1),(0,a.default)(t,"hotLimit",30),(0,a.default)(t,"hotScroll",!0),(0,a.default)(t,"hotLoading",!1),(0,a.default)(t,"hotTitle","加载更多"),(0,a.default)(t,"isFixed",!0),(0,a.default)(t,"isScrolled",!1),(0,a.default)(t,"scrolled",!1),(0,a.default)(t,"tempArr",[]),(0,a.default)(t,"d",""),(0,a.default)(t,"h",""),(0,a.default)(t,"m",""),(0,a.default)(t,"s",""),(0,a.default)(t,"sum_h",""),(0,a.default)(t,"sortMarTop",0),(0,a.default)(t,"globalDatas",{}),(0,a.default)(t,"mpHeight",108),(0,a.default)(t,"currSpid",""),(0,a.default)(t,"_options",{}),(0,a.default)(t,"isIntegral",!1),(0,a.default)(t,"appUpdate",{}),(0,a.default)(t,"sortMpTop",0),(0,a.default)(t,"bgColor",""),(0,a.default)(t,"bgPic",""),(0,a.default)(t,"bgTabVal",""),(0,a.default)(t,"windowHeight",0),(0,a.default)(t,"domHeight",0),(0,a.default)(t,"isHeaderSerch",!1),(0,a.default)(t,"showCoupon",!1),(0,a.default)(t,"couponArray",[]),(0,a.default)(t,"smallPage",!1),(0,a.default)(t,"isMenu",!1),(0,a.default)(t,"isScale",!1),(0,a.default)(t,"homeCombData",{}),(0,a.default)(t,"footerStatus",!1),(0,a.default)(t,"newData",{}),(0,a.default)(t,"activeRouter",""),(0,a.default)(t,"overflow",!1),(0,a.default)(t,"diyId",0),(0,a.default)(t,"preview",!1),(0,a.default)(t,"isSupport",!0),t},onShareAppMessage:function(){return o.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),{title:this.share_title,imageUrl:"",path:"/pages/index/index?spid="+this.uid}},onShareTimeline:function(){return{title:this.share_title,query:{spid:this.uid},imageUrl:""}},onLoad:function(e){var n=this;this._options=e,this.diyId=e.diyId||0,this.preview=!!e.time,n.$nextTick((function(){t.getSystemInfo({success:function(t){n.windowHeight=t.windowHeight}})})),n.pageLoad(e)},created:function(t){var e=getCurrentPages(),n=e[e.length-1].route;this.activeRouter="/"+n},onShow:function(){var e=this;e.isIntegral=t.getStorageSync("isIntegral"),e.getNav(),e.loadCoupon(),e.$nextTick((function(){var n=t.createSelectorQuery();n.select("#home").boundingClientRect(),n.exec((function(t){e.isScrolled=t[0].top<=-60}))}))},onHide:function(){t.setStorageSync("isIntegral",!1)},onReady:function(){},watch:{globalDatas:function(t,e){}},onPullDownRefresh:function(){this.overflow=!0,this.reconnect()},methods:{loadCoupon:function(){var e=this;this.showCoupon||t.getStorageSync("show_coupon")||!t.getStorageSync("is_new_user")||(0,f.getNewPeopleCouponLst)().then((function(n){e.couponArray=n.data,setTimeout((function(){e.showCoupon=e.couponArray.length>0,t.setStorageSync("show_coupon","1")}),1500)}))},pageLoad:function(t){if(t.spid?(this.currSpid=t.spid,w.globalData.spid=t.spid):(0,u.getStorage)("spid")&&(this.currSpid=(0,u.getStorage)("spid"),w.globalData.spid=(0,u.getStorage)("spid")),t.scene){var e=this.$util.getUrlParams(decodeURIComponent(t.scene));e.id&&(t.id=e.id),e.spid?(this.currSpid=e.spid,w.globalData.spid=e.spid):(0,u.getStorage)("spid")&&(this.currSpid=(0,u.getStorage)("spid"),w.globalData.spid=(0,u.getStorage)("spid"))}(0,m.default)(this.currSpid,this.isLogin),this.isLogin&&(0,g.silenceBindingSpread)(),this.reloadData(),Promise.all([this.diyData(0)]),this.isLogin&&this.getUserInfo()},closeShare:function(){t.setStorageSync("isIntegral",!1),this.isIntegral=t.getStorageSync("isIntegral")},bindHeighta:function(t){},reconnect:function(){var e=this;t.getNetworkType({success:function(t){e.errorNetwork="none"===t.networkType,e.errorNetwork?that.overflow=!1:e.pageLoad(e._options)}})},getNav:function(){var e=this;(0,c.getNavigation)().then((function(n){e.newData=n.data,e.newData.status&&e.newData.status.status?t.hideTabBar():t.showTabBar()}))},objToArr:function(t){var e=Object.keys(t).sort(),n=e.map((function(e){return t[e]}));return n},goRouter:function(e){var n=getCurrentPages(),o=n[n.length-1].$page.fullPath;e.link!=o&&t.switchTab({url:e.link,fail:function(n){t.redirectTo({url:e.link})}})},diyData:function(e){var n=this,o=this,i={id:e,did:o.diyId,version:"221"};o.styleConfig=[],o.smallPage=!1,(0,r.getDiy)(i).then((function(e){setTimeout((function(){o.isNodes++}),0),o.errorNetwork=!1;var i=e.data.data;t.setNavigationBarTitle({title:i.title}),i.is_bg_color&&(o.bgColor=i.color_picker),i.is_bg_pic?(o.bgPic=i.bg_pic,o.bgTabVal=i.bg_tab_val):o.bgPic="",o.styleConfig=o.objToArr(i.value),o.styleConfig.forEach((function(e,a,s){e.did=i.id,"headerSerch"!=e.name&&"homeComb"!=e.name||(o.isHeaderSerch=!0,"homeComb"==e.name&&(o.$set(o,"homeCombData",e),o.smallPage=!0)),"pageFoot"==e.name&&(e.status&&e.status.status&&(n.newData=e,setTimeout((function(t){o.$set(o,"footerStatus",!0)}),50)),t.setStorageSync("FOOTER_BAR",!(!e.status||!e.status.status)),e.menuList.map((function(e,n){"/pages/order_addcart/order_addcart"===e.link&&t.setStorageSync("FOOTER_ADDCART",n)})),s.splice(a,1)),"menus"==e.name&&(o.isMenu=!0),1==o.recommend_switch&&o.get_host_product(),t.pageScrollTo({scrollTop:0}),o.overflow=!1,t.stopPullDownRefresh()}))})).catch((function(e){t.showToast({title:e,icon:"none"}),t.stopPullDownRefresh()}))},changeDiy:function(e){var n=this;e?(n.styleConfig=[],(0,r.getPageDiy)({id:e,version:"221"}).then((function(e){var o=e.data.data;t.setNavigationBarTitle({title:o.title}),n.isScale=!0,o.is_bg_color&&(n.bgColor=o.color_picker),o.is_bg_pic?(n.bgPic=o.bg_pic,n.bgTabVal=o.bg_tab_val):n.bgPic="",n.styleConfig=n.objToArr(o.value),n.styleConfig.forEach((function(t,e,i){t.did=o.id,"headerSerch"!=t.name&&"homeComb"!=t.name&&"tabNav"!=t.name||n.styleConfig.splice(e,1),"menus"==t.name&&(n.isMenu=!0)})),n.isHeaderSerch=!0,n.isScale=!0,t.pageScrollTo({scrollTop:0}),t.stopPullDownRefresh()})).catch((function(e){n.styleConfig=[],t.stopPullDownRefresh(),t.showToast({title:e,icon:"none"})}))):(n.diyData(0),n.isScale=!1)},onLoadFun:function(t){this.isShowAuth=!1},bindMore:function(){try{t.setStorageSync("storeIndex",this.navTop[this.navIndex].pid),t.switchTab({url:"/pages/goods_cate/goods_cate"})}catch(e){}},goDetails:function(e){var n=this;(0,l.goShopDetail)(e,this.uid).then((function(o){n.isLogin?(0,f.initiateAssistApi)(e.activity_id).then((function(e){var n=e.data.product_assist_set_id;t.hideLoading(),t.navigateTo({url:"/pages/activity/assist_detail/index?id="+n})})).catch((function(e){t.showToast({title:e,icon:"none"})})):(n.isAuto=!0,n.isShowAuth=!0)}))},getUserInfo:function(){var t=this;(0,s.getUserInfo)().then((function(e){t.userInfo=e.data}))},setVisit:function(){(0,s.setVisit)({url:"/pages/index/index"}).then((function(t){}))},changeTab:function(e){var n=this;this.navIndex!=e.index&&(this.navIndex=e.index,e.index>0&&((0,h.storeCategory)({pid:e.pid}).then((function(o){n.sortList=o.data.length>9?o.data.splice(0,9):o.data,n.sortList.length>0&&(n.where.pid=e.pid,n.where.page=1,n.loadend=!1,n.loading=!1,n.sortProduct=[],n.get_product_list(),t.pageScrollTo({scrollTop:0}))})),this.sortMarTop=10))},get_product_list:function(){var t=this;t.loading||(t.loading=!0,t.loadTitle="",(0,h.getProductslist)(t.where).then((function(e){var n=e.data.list,o=t.$util.SplitArray(n,t.sortProduct),i=n.length<t.where.limit;t.loadend=i,t.loading=!1,t.loadTitle=i?"已全部加载":"加载更多",t.$set(t,"sortProduct",o),t.$set(t.where,"page",t.where.page+1)})).catch((function(e){t.loading=!1,t.loadTitle="加载更多"})))},get_host_product:function(){var t=this,e=t.hotLimit;t.hotScroll&&(t.hotLoading||(t.hotLoading=!0,t.hotTitle="",(0,h.getProductHot)(t.hotPage,t.hotLimit).then((function(n){var o=n.data.list,i=t.$util.SplitArray(o,t.hostProduct),a=o.length<=e&&0!=o.length;t.hotScroll=a,t.hotLoading=!1,t.hotTitle=a?"加载更多":"已全部加载",t.$set(t,"hostProduct",i),t.$set(t,"hotPage",t.hotPage+1)}))))},getCateData:function(){var t=this;(0,r.getCateData)().then((function(e){e.data.unshift({cate_name:"首页"}),t.$set(t,"navTop",e.data)}))},reloadData:function(){var t=this;setTimeout((function(){t.showSkeleton=!1}),500)},authColse:function(t){this.isShowAuth=t},goDetail:function(e){var n=this;if(e.activity&&"2"===e.activity.type&&!this.isLogin)return this.$set(this,"isAuto",!0),void this.$set(this,"isShowAuth",!0);(0,l.goShopDetail)(e,this.uid).then((function(o){n.isLogin?(0,f.initiateAssistApi)(e.activity_id).then((function(e){var n=e.data.product_assist_set_id;t.hideLoading(),t.navigateTo({url:"/pages/activity/assist_detail/index?id="+n})})).catch((function(e){t.showToast({title:e,icon:"none"})})):(n.isAuto=!0,n.isShowAuth=!0)}))}},mounted:function(){var e=this,n=t.createSelectorQuery().in(this);n.select("#home").boundingClientRect(),n.exec((function(t){e.domHeight=t[0].height}))},onReachBottom:function(){1==this.recommend_switch&&(0==this.navIndex?this.get_host_product():this.sortProduct.length>0?this.get_product_list():this.get_host_product())},onPageScroll:function(e){if(this.isHeaderSerch){var n;n=e.scrollTop>50,this.isScrolled=n}else this.isScrolled=!1;t.$emit("scroll")}};e.default=S}).call(this,n("543d")["default"],n("bc2e")["default"])},b297:function(t,e,n){},c403:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("4c7d");o(n("66fd"));var i=o(n("e537"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},e537:function(t,e,n){"use strict";n.r(e);var o=n("468a"),i=n("634d");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("0f9c");var s=n("f0c5"),r=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"2555fbd4",null,!1,o["a"],void 0);e["default"]=r.exports}},[["c403","common/runtime","common/vendor"]]]);