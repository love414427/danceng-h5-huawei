(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/columnGoods/goods_coupon_list/index"],{"2ff3":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.productList.length),o=0==t.productList.length&&t.where.page>1;t._isMounted||(t.e0=function(e){t.downStatus=!t.downStatus}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:o}})},n=[]},"85b9":function(t,e,i){"use strict";(function(t){var o=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("9523")),r=i("736f"),s=i("041f"),c=i("26cb"),a=i("3255"),h=i("f26a"),d=i("f823");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}getApp();var f=(0,n.default)({computed:(0,a.configMap)({hide_mer_status:1,recommend_switch:0},(0,c.mapGetters)(["uid","isLogin","scrollTop","viewColor","keyColor"])),components:{passwordPopup:function(){Promise.all([i.e("common/vendor"),i.e("components/passwordPopup/index")]).then(function(){return resolve(i("5edd"))}.bind(null,i)).catch(i.oe)},recommend:function(){Promise.all([i.e("common/vendor"),i.e("components/recommend/index")]).then(function(){return resolve(i("1857"))}.bind(null,i)).catch(i.oe)},rightSlider:function(){i.e("components/rightSlider").then(function(){return resolve(i("c317"))}.bind(null,i)).catch(i.oe)},WaterfallsFlow:function(){i.e("components/WaterfallsFlow/WaterfallsFlow").then(function(){return resolve(i("7612"))}.bind(null,i)).catch(i.oe)},authorize:function(){Promise.all([i.e("common/vendor"),i.e("components/Authorize")]).then(function(){return resolve(i("02f6"))}.bind(null,i)).catch(i.oe)}},watch:{},data:function(){return{domain:h.HTTP_REQUEST_URL,productList:[],couponData:{},list:[],where:{coupon_id:"",cate_id:"",order:"",price_on:"",price_off:"",brand_id:"",keyword:"",page:1,limit:30},price:0,stock:0,nows:!1,loadend:!1,loading:!1,loadTitle:"加载更多",title:"",hostProduct:[],hotPage:1,hotLimit:10,hotScroll:!1,rightBox:!1,brandList:[],downKey:0,downStatus:!1,downMenu:[{title:"综合排序",key:1},{title:"评分",key:2},{title:"新品",key:3}],firstKey:0,tabIndex:1,storeList:[],sotreParam:{keyword:"",page:1,limit:30,order:""},storeKey:0,storeScroll:!0,isShowAuth:!1,isAuto:!1}},onPageScroll:function(){t.$emit("scroll")},onLoad:function(t){this.$set(this.where,"cate_id",t.id||""),this.$set(this.where,"coupon_id",t.coupon_id||""),this.title=t.title||"",this.$set(this.where,"keyword",t.searchValue||""),this.get_product_list(!0),this.get_host_product()},onReady:function(){},mounted:function(){this.get_product_list(!0)},methods:{onLoadFun:function(){this.isShowAuth=!1},authColse:function(t){this.isShowAuth=t},goShop:function(e){1!=this.hide_mer_status&&t.navigateTo({url:"/pages/store/home/index?id=".concat(e)})},storeTab:function(t){this.storeKey=t,this.sotreParam.order=0==t?"":1==t?"sales":"rate",this.sotreParam.page=1,this.storeScroll=!0,this.storeList=[]},bindRight:function(){this.price=0,this.firstKey=4,this.getBrandlist()},getBrandlist:function(){var t=this,e=[];(0,r.getBrandlist)({cate_id:this.where.cate_id,keyword:this.where.keyword}).then((function(i){e=i.data.list.map((function(t){return l(l({},t),{},{check:!1})})),t.where.brand_id.length>0&&t.where.brand_id.forEach((function(t,i){e.forEach((function(e){t==e.brand_id&&(e.check=!0)}))})),t.brandList=e,t.rightBox=!0}))},godDetail:function(e){var i=this;(0,d.goShopDetail)(e,this.uid).then((function(o){i.isLogin?(0,s.initiateAssistApi)(e.activity_id).then((function(e){var i=e.data.product_assist_set_id;t.navigateTo({url:"/pages/activity/assist_detail/index?id="+i})})).catch((function(e){t.showToast({title:e,icon:"none"})})):(i.isAuto=!0,i.isShowAuth=!0)}))},confirm:function(t){var e=[];0==t.brandList.length?this.where.brand_id="":(t.brandList.forEach((function(t){e.push(t.brand_id)})),this.where.brand_id=e),this.rightBox=t.status,this.where.price_on=t.price_on,this.where.price_off=t.price_off,this.loadend=!1,this.$set(this.where,"page",1),this.get_product_list(!0)},close:function(){this.rightBox=!1},bindDown:function(t,e){this.firstKey=0,0==e?this.where.order="":1==e?this.where.order="rate":2==e&&(this.where.order="is_new"),this.downKey=e,this.downStatus=!1,this.loadend=!1,this.$set(this.where,"page",1),this.get_product_list(!0)},searchSubmit:function(t){this.$set(this.where,"keyword",t.detail.value),this.loadend=!1,this.$set(this.where,"page",1),this.get_product_list(!0)},get_host_product:function(){var t=this;t.hotScroll||(0,r.getProductHot)(t.hotPage,t.hotLimit).then((function(e){t.hotPage++,t.hotScroll=e.data.length<t.hotLimit,t.hostProduct=t.hostProduct.concat(e.data.list)}))},set_where:function(e){switch(e){case 1:t.setStorageSync("storeIndex",this.where.cate_id),t.navigateBack();break;case 2:this.firstKey=e,0==this.price?(this.price=1,this.where.order="price_asc"):1==this.price?(this.price=2,this.where.order="price_desc"):2==this.price&&(this.price=0,this.where.order=""),this.$set(this.where,"page",1),this.get_product_list(!0);break;case 3:this.price=0,this.loadend=!1,this.$set(this.where,"order","sales"),this.$set(this.where,"page",1),this.get_product_list(!0),this.firstKey=e;break}this.loadend=!1,this.$set(this.where,"page",1),this.get_product_list(!0)},get_product_list:function(t){var e=this,i=this;i.loadend||i.loading||(!0===t&&i.$set(i,"productList",[]),i.loading=!0,i.loadTitle="",(0,r.getCouponProductlist)(i.where).then((function(t){e.couponData=t.data.coupon;var o=t.data.list,n=i.$util.SplitArray(o,i.productList),r=o.length<i.where.limit;i.loadend=r,i.loading=!1,i.loadTitle=r?"已全部加载":"加载更多",i.$set(i,"productList",n),i.$set(i.where,"page",i.where.page+1)})).catch((function(t){i.loading=!1,i.loadTitle="加载更多"})))}},onPullDownRefresh:function(){},onReachBottom:function(){this.productList.length>0?this.get_product_list(""):this.get_host_product()}},"onPullDownRefresh",(function(){var e=this;setTimeout((function(){var i=e.productList.reverse();e.productList=i,t.stopPullDownRefresh()}),500)}));e.default=f}).call(this,i("543d")["default"])},"9cbe":function(t,e,i){"use strict";i.r(e);var o=i("85b9"),n=i.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(r);e["default"]=n.a},a7a9:function(t,e,i){"use strict";(function(t,e){var o=i("4ea4");i("4c7d");o(i("66fd"));var n=o(i("cd29"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(n.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},c7c7:function(t,e,i){},cd29:function(t,e,i){"use strict";i.r(e);var o=i("2ff3"),n=i("9cbe");for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("f5aa");var s=i("f0c5"),c=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"fb16dbf6",null,!1,o["a"],void 0);e["default"]=c.exports},f5aa:function(t,e,i){"use strict";var o=i("c7c7"),n=i.n(o);n.a}},[["a7a9","common/runtime","common/vendor"]]]);