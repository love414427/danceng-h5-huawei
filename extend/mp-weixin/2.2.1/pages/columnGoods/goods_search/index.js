(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/columnGoods/goods_search/index"],{"005d":function(t,e,o){"use strict";(function(t,e){var i=o("4ea4");o("4c7d");i(o("66fd"));var n=i(o("5dac"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(n.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},"0dfe":function(t,e,o){},"201e":function(t,e,o){"use strict";var i=o("0dfe"),n=o.n(i);n.a},"51ef":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.historyList.length),i=t.historyList.length>9&&!t.historyBox,n=t.historyList.length>9&&t.historyBox,s=t.historyList.length,a=t.hotSearchList.length>8&&!t.hotSearchBox,c=t.hotSearchList.length>8&&t.hotSearchBox;t._isMounted||(t.e0=function(e){t.historyBox=!0},t.e1=function(e){t.historyBox=!1},t.e2=function(e){t.hotSearchBox=!0},t.e3=function(e){t.hotSearchBox=!1}),t.$mp.data=Object.assign({},{$root:{g0:o,g1:i,g2:n,g3:s,g4:a,g5:c}})},n=[]},"5dac":function(t,e,o){"use strict";o.r(e);var i=o("51ef"),n=o("87d1");for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);o("a2f9"),o("201e");var a=o("f0c5"),c=Object(a["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=c.exports},"87d1":function(t,e,o){"use strict";o.r(e);var i=o("d663"),n=o.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},a2f9:function(t,e,o){"use strict";var i=o("df4e"),n=o.n(i);n.a},d663:function(t,e,o){"use strict";(function(t){var i=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("736f"),s=i(o("9673")),a=(o("3255"),o("f823")),c=o("041f"),r=o("26cb"),h={computed:(0,r.mapGetters)(["isLogin","uid"]),components:{passwordPopup:function(){Promise.all([o.e("common/vendor"),o.e("components/passwordPopup/index")]).then(function(){return resolve(o("5edd"))}.bind(null,o)).catch(o.oe)},authorize:function(){Promise.all([o.e("common/vendor"),o.e("components/Authorize")]).then(function(){return resolve(o("02f6"))}.bind(null,o)).catch(o.oe)}},data:function(){return{hostProduct:[],searchValue:"",focus:!0,bastList:[],hotSearchList:[],first:0,limit:8,page:1,loading:!1,loadend:!1,loadTitle:"加载更多",hotPage:1,isScroll:!0,historyList:[],tempStorage:[],historyBox:!1,hotSearchBox:!1,isAuto:!1,isShowAuth:!1}},onLoad:function(t){this.searchValue=t.searchVal||""},onShow:function(){try{this.historyList=[],this.tempStorage=[];var e=t.getStorageSync("historyList");e.length>0?this.historyList=e:this.historyList=[],this.tempStorage=this.historyList}catch(o){}this.getRoutineHotSearch()},methods:{onLoadFun:function(t){this.isShowAuth=!1},authColse:function(t){this.isShowAuth=t},remove:function(){var e=this;t.showModal({title:"提示",content:"确认删除全部历史搜索记录？",success:function(o){if(o.confirm){e.tempStorage=[];try{t.setStorageSync("historyList",e.tempStorage),e.historyList=[]}catch(i){}}else o.cancel}})},getRoutineHotSearch:function(){var t=this;(0,n.getSearchKeyword)().then((function(e){t.$set(t,"hotSearchList",e.data)}))},setHotSearchValue:function(t,e){var o=this;this.focus=!1,e?this.$set(this,"searchValue",t.keyword):this.$set(this,"searchValue",t),this.$nextTick((function(){o.focus=!0})),this.searchBut()},setValue:function(t){this.$set(this,"searchValue",t.detail.value)},searchBut:function(){var e=this;if(/^(\/@[1-9]{1}).*\*\//.test(this.searchValue))t.showLoading({title:"加载中",mask:!0}),(0,n.copyPasswordSearch)({key:this.searchValue}).then((function(o){t.hideLoading();var i=o.data;(0,s.default)(o.data.user.uid,e.isLogin),(0,a.goShopDetail)(i,e.uid).then((function(o){e.isLogin?(0,c.initiateAssistApi)(i.activity_id).then((function(e){var o=e.data.product_assist_set_id;t.hideLoading(),t.navigateTo({url:"/pages/activity/assist_detail/index?id="+o})})).catch((function(e){t.showToast({title:e,icon:"none"})})):(e.isAuto=!0,e.isShowAuth=!0)}))})).catch((function(o){t.showToast({title:o,icon:"none"}),e.searchValue=""}));else{var o=!1;this.tempStorage.forEach((function(t,i){t==e.searchValue&&(o=!0)})),!o&&this.searchValue&&this.tempStorage.unshift(this.searchValue);try{t.setStorageSync("historyList",this.tempStorage)}catch(i){}t.navigateTo({url:"/pages/columnGoods/goods_search_con/index?searchValue="+this.searchValue})}}}};e.default=h}).call(this,o("543d")["default"])},df4e:function(t,e,o){}},[["005d","common/runtime","common/vendor"]]]);