(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/activity/lifeService/index"],{"0dc4":function(t,e,o){"use strict";(function(t,e){var i=o("4ea4");o("4c7d");i(o("66fd"));var n=i(o("a75c"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(n.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},1747:function(t,e,o){"use strict";o.r(e);var i=o("949a"),n=o.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},"85f1":function(t,e,o){},"949a":function(t,e,o){"use strict";(function(t){var i=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(o("9523")),r=o("736f"),a=o("041f"),s=o("26cb"),c=(o("f823"),o("f26a"));function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}getApp();var u={data:function(){return{domain:c.HTTP_REQUEST_URL,price:0,stock:0,nows:!1,loading:!1,loadingIcon:!0,loadTitle:"加载更多",title:"",hotPage:1,hotLimit:10,hotScroll:!1,rightBox:!1,brandList:[],downKey:0,downStatus:!1,downMenu:[{title:"默认",key:0,order:""},{title:"销量",key:1,order:"sales"},{title:"好评",key:2,order:"rate"},{title:"距离",key:3,order:"location"}],firstKey:0,storeList:[],sotreParam:{keyword:"",page:1,limit:10,order:""},storeKey:0,storeScroll:!0,mer_id:"",sortId:"",hide_mer_status:"",price_on:"",price_off:"",detaile_address:"",recommend_address:"",latitude:"",longitude:"",count:0,mer_location:""}},created:function(){},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){(0,n.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({downMenus:function(){var t=this;return this.downMenu.filter((function(e){return t.mer_location?e:e.key<3}))}},(0,s.mapGetters)(["viewColor"])),onLoad:function(e){var o=this;this.mer_id=e.mer_id,t.getStorage({key:"GLOBAL_DATA",success:function(t){o.hide_mer_status=t.data.hide_mer_status,o.storeList=[],1==t.data.mer_location?(o.mer_location=t.data.mer_location,o.selfLocation()):o.getServiceList()}})},methods:{showMaoLocation:function(e,o){if(!e||!o)return this.$util.Tips({title:"请设置允许商城访问您的位置！"});t.openLocation({latitude:parseFloat(e),longitude:parseFloat(o),scale:8,geocode:!0,name:"当前位置",address:this.recommend_address,success:function(t){}})},showStoreLocation:function(e){if(!e.lat||!e.long)return this.$util.Tips({title:"请设置允许商城访问您的位置！"});t.openLocation({latitude:parseFloat(e.lat),longitude:parseFloat(e.long),scale:8,name:e.mer_name,address:e.mer_address?e.mer_address:"",success:function(t){}})},selfLocation:function(){var e=this;t.getLocation({type:"gcj02",success:function(t){var o,i;o=t.latitude.toString(),i=t.longitude.toString(),e.latitude=t.latitude,e.longitude=t.longitude,(0,r.getGeocoder)({lat:o,long:i}).then((function(t){e.detaile_address=t.data.address,e.recommend_address=t.data.address.length>4?t.data.address.slice(0,4)+"...":t.data.address}))},fail:function(e){t.showToast({title:e,icon:"none",duration:1e3})},complete:function(t){e.getServiceList()}})},getServiceList:function(){var t=this;if(!this.loading){this.loading=!0;var e={keyword:this.sotreParam.keyword,page:this.sotreParam.page,limit:10,order:this.sotreParam.order};this.latitude&&(e.location=this.latitude+","+this.longitude),(0,a.getMerchantServiceLst)(e).then((function(e){t.count=e.data.count,t.storeList=t.storeList.concat(e.data.list),t.loading=!1,t.loadingIcon=!1}))}},goStore:function(e){1!=this.hide_mer_status&&t.navigateTo({url:"/pages/store/home/index?id=".concat(e)})},searchSubmit:function(t){this.$set(this.sotreParam,"keyword",t.detail.value),this.set_where(this.firstKey)},set_where:function(t){this.loading||(this.storeList=[],this.firstKey=t,this.sotreParam.page=1,this.sotreParam.order=this.downMenu[t].order,this.getServiceList())},backjJump:function(){t.navigateBack({delta:1})}},onPullDownRefresh:function(){},onReachBottom:function(){if(this.count===this.storeList.length){if(0===this.count)return;t.showToast({title:"已加载全部",icon:"none",duration:1e3})}else this.sotreParam.page+=1,this.getServiceList()}};e.default=u}).call(this,o("543d")["default"])},a75c:function(t,e,o){"use strict";o.r(e);var i=o("cc1a"),n=o("1747");for(var r in n)["default"].indexOf(r)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(r);o("cc6b");var a=o("f0c5"),s=Object(a["a"])(n["default"],i["b"],i["c"],!1,null,"667e4d02",null,!1,i["a"],void 0);e["default"]=s.exports},cc1a:function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,o=(t._self._c,t.storeList.length),i=o>0?t.__map(t.storeList,(function(e,o){var i=t.__get_orig(e),n=e.care_count<1e4?null:(e.care_count/1e4).toFixed(2),r=e.recommend.length;return{$orig:i,g1:n,g2:r}})):null,n=!t.storeList.length&&!t.loading&&!t.loadingIcon;t.$mp.data=Object.assign({},{$root:{g0:o,l0:i,g3:n}})},n=[]},cc6b:function(t,e,o){"use strict";var i=o("85f1"),n=o.n(i);n.a}},[["0dc4","common/runtime","common/vendor"]]]);