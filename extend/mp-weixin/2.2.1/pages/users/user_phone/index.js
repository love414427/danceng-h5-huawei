(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/user_phone/index"],{"002d":function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("4c7d");i(n("66fd"));var c=i(n("f87a"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(c.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"08fd":function(e,t,n){"use strict";var i=n("5033"),c=n.n(i);c.a},1338:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){}));var i=function(){var e=this.$createElement;this._self._c},c=[]},5033:function(e,t,n){},b95f:function(e,t,n){"use strict";n.r(t);var i=n("d4ff"),c=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=c.a},d4ff:function(e,t,n){"use strict";(function(e,i){var c=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n("2eee")),o=c(n("c973")),u=c(n("9523")),s=c(n("e1ea")),a=n("58d4"),f=n("6859"),l=n("26cb"),d=n("3255");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b={mixins:[s.default],components:{authorize:function(){Promise.all([n.e("common/vendor"),n.e("components/Authorize")]).then(function(){return resolve(n("02f6"))}.bind(null,n)).catch(n.oe)},Verify:function(){n.e("components/verify/verify").then(function(){return resolve(n("496c"))}.bind(null,n)).catch(n.oe)}},data:function(){return{phone:"",captcha:"",isAuto:!1,isShowAuth:!1,key:"",codeVal:""}},computed:h(h({},(0,l.mapGetters)(["isLogin","viewColor"])),(0,d.configMap)(["wechat_phone_switch"])),onLoad:function(){var t=this;this.isLogin||(this.isAuto=!0,this.isShowAuth=!0),e.login({success:function(e){e.code&&(t.codeVal=e.code)}})},methods:{onLoadFun:function(){this.isShowAuth=!1},authColse:function(e){this.isShowAuth=e},getPhoneNumber:function(e){var t=this;(0,a.appletsDecrypt)({iv:e.detail.iv,encryptedData:e.detail.encryptedData,code:t.codeVal}).then((function(e){t.$util.Tips({title:"绑定成功！",icon:"success"}),setTimeout((function(){i.switchTab({url:"/pages/user/index"})}),2e3)}))},editPwd:function(){var e=this;return e.phone?/^1(3|4|5|7|8|9|6)\d{9}$/i.test(e.phone)?e.captcha?void(0,a.bindingPhone)({phone:e.phone,sms_code:e.captcha}).then((function(t){if(void 0===t.data||!t.data.is_bind)return e.$util.Tips({title:"绑定成功！",icon:"success"},{tab:5,url:"/pages/users/user_info/index"});i.showModal({title:"是否绑定账号",content:t.msg,confirmText:"绑定",success:function(t){if(t.confirm)(0,a.bindingPhone)({phone:e.phone,captcha:e.captcha,step:1}).then((function(t){return e.$util.Tips({title:t.msg,icon:"success"},{tab:5,url:"/pages/users/user_info/index"})})).catch((function(t){return e.$util.Tips({title:t})}));else if(t.cancel)return e.$util.Tips({title:"您已取消绑定！"},{tab:5,url:"/pages/users/user_info/index"})}})})).catch((function(t){return e.$util.Tips({title:t})})):e.$util.Tips({title:"请填写验证码"}):e.$util.Tips({title:"请输入正确的手机号码！"}):e.$util.Tips({title:"请填写手机号码！"})},code:function(e){var t=this;return(0,o.default)(r.default.mark((function n(){var i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t,i.phone){n.next=3;break}return n.abrupt("return",i.$util.Tips({title:"请填写手机号码！"}));case 3:if(/^1(3|4|5|7|8|9|6)\d{9}$/i.test(i.phone)){n.next=5;break}return n.abrupt("return",i.$util.Tips({title:"请输入正确的手机号码！"}));case 5:return t.disabled=!0,n.next=8,(0,f.registerVerify)({phone:i.phone,key:i.key,code:i.captcha,type:"binding",captchaType:"blockPuzzle",captchaVerification:e.captchaVerification}).then((function(e){t.disabled=!1,i.$util.Tips({title:e.msg}),i.sendCode()})).catch((function(e){return t.disabled=!1,i.$util.Tips({title:e})}));case 8:case"end":return n.stop()}}),n)})))()},success:function(e){this.$refs.verify.hide(),this.code(e)},handleVerify:function(){this.$refs.verify.show()}}};t.default=b}).call(this,n("bc2e")["default"],n("543d")["default"])},f87a:function(e,t,n){"use strict";n.r(t);var i=n("1338"),c=n("b95f");for(var r in c)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return c[e]}))}(r);n("08fd");var o=n("f0c5"),u=Object(o["a"])(c["default"],i["b"],i["c"],!1,null,"3bd82c20",null,!1,i["a"],void 0);t["default"]=u.exports}},[["002d","common/runtime","common/vendor"]]]);