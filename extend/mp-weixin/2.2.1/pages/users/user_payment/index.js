(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/user_payment/index"],{3101:function(e,t,i){"use strict";i.r(t);var n=i("efbb"),r=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},"66ee":function(e,t,i){"use strict";i.r(t);var n=i("fdfd"),r=i("3101");for(var a in r)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(a);i("b2f1");var c=i("f0c5"),o=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,"2b2654e6",null,!1,n["a"],void 0);t["default"]=o.exports},7230:function(e,t,i){},7423:function(e,t,i){"use strict";(function(e,t){var n=i("4ea4");i("4c7d");n(i("66fd"));var r=n(i("66ee"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(r.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},b2f1:function(e,t,i){"use strict";var n=i("7230"),r=i.n(n);r.a},efbb:function(e,t,i){"use strict";(function(e){var n=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i("9523")),a=i("6859"),c=i("26cb");i("4d59");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){(0,r.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u=e.getSystemInfoSync().statusBarHeight+"px",l={components:{authorize:function(){Promise.all([i.e("common/vendor"),i.e("components/Authorize")]).then(function(){return resolve(i("02f6"))}.bind(null,i)).catch(i.oe)},payment:function(){Promise.all([i.e("common/vendor"),i.e("components/payment/index")]).then(function(){return resolve(i("fecf"))}.bind(null,i)).catch(i.oe)}},data:function(){return{otherValue:"其他",now_money:0,navRecharge:["账户充值","佣金转入"],active:0,number:"",from:"",userinfo:{},placeholder:"0.00",isAuto:!1,isShowAuth:!1,picList:[],activePic:0,money:"",numberPic:"",rechar_id:"0",rechargeAttention:[],delta:1,statusBarHeight:u,pay_close:!1,totalPrice:"0",payMode:[{name:"微信支付",icon:"icon-weixinzhifu",value:"routine",title:"微信快捷支付",payStatus:!0}]}},computed:(0,c.mapGetters)(["viewColor","isLogin"]),onLoad:function(e){this.delta=e.delta||1,this.isLogin?(this.getUserInfo(),this.getRecharge()):(this.isAuto=!0,this.isShowAuth=!0)},onUnload:function(){e.navigateBack({delta:this.delta})},methods:{goBack:function(){e.navigateBack()},picCharge:function(e,t){this.activePic=e,void 0===t?(this.rechar_id="0",this.numberPic="",this.otherValue=""):(this.otherValue="其他",this.money="",this.rechar_id=t.id.toString(),this.numberPic=t.data.price)},getRecharge:function(){var e=this;(0,a.getRechargeApi)().then((function(t){e.picList=t.data.recharge_quota,e.picList[0]&&(e.rechar_id=e.picList[0].id.toString(),e.numberPic=e.picList[0].data.price),e.rechargeAttention=t.data.recharge_attention||[]})).catch((function(t){e.$dialog.toast({mes:t})}))},onLoadFun:function(){this.isShowAuth=!1,this.getUserInfo(),this.getRecharge()},authColse:function(e){this.isShowAuth=e},navRecharges:function(e){this.active=e},getUserInfo:function(){var e=this;(0,a.spreadInfo)().then((function(t){e.$set(e,"userinfo",t.data)}))},payClose:function(){this.pay_close=!1},payCheck:function(e){this.createOrder(e)},submitSub:function(t){var i=this,n=t.detail.value.number;if(i.active){if(parseFloat(n)<0||NaN==parseFloat(n)||void 0==n||""==n)return i.$util.Tips({title:"请输入金额"});if(parseFloat(n)>i.userinfo.brokerage_price)return i.$util.Tips({title:"剩余可用佣金不足"+parseFloat(n)});e.showModal({title:"转入余额",content:"转入余额后无法再次转出，确认是否转入余额",success:function(e){if(e.confirm)(0,a.rechargeBrokerage)({brokerage:parseFloat(n)}).then((function(e){return i.$util.Tips({title:"转入成功",icon:"success"},{tab:5,url:"/pages/users/user_money/index"})})).catch((function(e){return i.$util.Tips({title:e})}));else if(e.cancel)return i.$util.Tips({title:"已取消"})}})}else{if(0==this.rechar_id){if(0===parseFloat(i.money))return i.$util.Tips({title:"充值金额金额不能为0！"});if(!i.money)return i.$util.Tips({title:"请填写充值金额！"});if(!Number(i.money))return i.$util.Tips({title:"请填写正确的金额！"})}this.pay_close=!0}},createOrder:function(t){var i=this,n={price:0==i.rechar_id?i.money:i.numberPic,recharge_id:i.rechar_id,type:t};(0,a.rechargeWechat)(n).then((function(e){i.callPay(e)})).catch((function(t){e.showToast({title:t,icon:"none"})}))},callPay:function(t){var i=this,n=t.data.type,r=(t.data.recharge_id,t.data.pay_key),a=t.data.config,c="/pages/users/user_payment/index";switch(n){case"ORDER_EXIST":case"EXTEND_ORDER":case"PAY_ERROR":case"error":return e.hideLoading(),i.$util.Tips({title:t.message},{tab:5,url:c});case"success":return e.hideLoading(),i.seckillId?i.$util.Tips({title:t.message,icon:"success"},{tab:4,url:c}):i.$util.Tips({title:t.message,icon:"success"},{tab:5,url:c});case"alipay":case"alipayQr":return e.hideLoading(),i.$emit("onChangeFun",{action:"payClose"}),void e.navigateTo({url:"/pages/order_pay_back/index?keyCode="+r+"&url="+a+"&type=10"});case"routine":a.timeStamp=a.timestamp;var o="";o=e.requestOrderPayment?"requestOrderPayment":"requestPayment",e[o](s(s({},a),{},{success:function(t){return e.hideLoading(),i.getUserInfo(),i.getRecharge(),i.$util.Tips({title:"支付成功",icon:"success"},{tab:5,url:c})},fail:function(t){return e.hideLoading(),i.$util.Tips({title:"取消支付"},{tab:5,url:c})}}));break;case"balance":return e.hideLoading(),i.$util.Tips({title:t.msg},{tab:5,url:c})}},onChangeFun:function(e){var t=e,i=t.action||null,n=void 0!=t.value?t.value:null;i&&this[i]&&this[i](n)}}};t.default=l}).call(this,i("543d")["default"])},fdfd:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){}));var n=function(){var e=this.$createElement;this._self._c},r=[]}},[["7423","common/runtime","common/vendor"]]]);