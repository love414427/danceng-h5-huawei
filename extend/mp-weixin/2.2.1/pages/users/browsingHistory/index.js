(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/browsingHistory/index"],{"25e0":function(t,e,i){},"28ab":function(t,e,i){"use strict";i.r(e);var c=i("9ee6"),n=i("c2bf");for(var l in n)["default"].indexOf(l)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(l);i("a580");var s=i("f0c5"),o=Object(s["a"])(n["default"],c["b"],c["c"],!1,null,"6c6a3be1",null,!1,c["a"],void 0);e["default"]=o.exports},"9ee6":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return c}));var c={easyLoadimage:function(){return Promise.all([i.e("common/vendor"),i.e("components/easy-loadimage/easy-loadimage")]).then(i.bind(null,"2243"))}},n=function(){var t=this.$createElement,e=(this._self._c,this.list.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},l=[]},"9f43":function(t,e,i){"use strict";(function(t,e){var c=i("4ea4");i("4c7d");c(i("66fd"));var n=c(i("28ab"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(n.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},a580:function(t,e,i){"use strict";var c=i("25e0"),n=i.n(c);n.a},c0c6:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=i("6859"),n=i("f823"),l=i("26cb"),s={components:{emptyPage:function(){i.e("components/emptyPage").then(function(){return resolve(i("c71c"))}.bind(null,i)).catch(i.oe)},easyLoadimage:function(){Promise.all([i.e("common/vendor"),i.e("components/easy-loadimage/easy-loadimage")]).then(function(){return resolve(i("2243"))}.bind(null,i)).catch(i.oe)}},computed:(0,l.mapGetters)(["viewColor"]),data:function(){return{list:[],isScroll:!0,page:1,limit:50,isAllSelect:!1,isEdit:!1,allArr:[],total:0}},onShow:function(){this.list=[],this.allArr=[],this.isScroll=!0,this.page=1,this.getList(),this.isAllSelect=!1,this.isEdit=!1},methods:{getList:function(){var t=this;(0,c.historyList)({page:t.page,limit:t.limit}).then((function(e){var i=e.data;t.total=i.count,i.list&&(i.list.forEach((function(t,e){t.check=!1})),t.isScroll=i.list.length>=t.limit,t.page+=1,t.list=t.list.concat(i.list),t.listFilter(t.list))}))},listFilter:function(t){var e=this;t.forEach((function(t,i){t.allCheck||e.$set(t,"allCheck",!1),t.list.forEach((function(t,i){t.check||e.$set(t,"check",!1)}))})),this.isAllSelect&&this.cartAllCheck("allCheck")},checkboxAllChange:function(){this.isAllSelect=!this.isAllSelect,this.cartAllCheck("allCheck")},handleEdit:function(){this.isEdit=!this.isEdit},historyCheck:function(t){t.check=!t.check,this.cartAllCheck("goodsCheck")},subDel:function(e){var i,n=this,l="empty"==e?"确定清空浏览记录？":"确定删除浏览记录？";if("batch"==e?(i=[],n.list.forEach((function(t){t.list.forEach((function(t){t.check&&i.push(t.user_history_id)}))}))):i=1,0==i.length&&"batch"==e)return n.$util.Tips({title:"请选择记录"});t.showModal({title:"提示",content:l,success:function(t){if(t.confirm)(0,c.historyBatchDelete)({history_id:i}).then((function(t){return n.allArr=[],n.page=1,n.list=[],n.isEdit=!1,n.isScroll=!0,n.getList(),n.$util.Tips({title:t.message,icon:"success"})})).catch((function(t){return n.$util.Tips({title:t})}));else if(t.cancel)return n.$util.Tips({title:"已取消"})}})},subCollect:function(){var t=this,e=[];t.list.forEach((function(t){t.list.forEach((function(t){t.check&&e.push(t.spu.spu_id)}))})),(0,c.historyBatchCollect)({type_id:e,type:1}).then((function(e){return t.allArr=[],t.page=1,t.list=[],t.isEdit=!1,t.isScroll=!0,t.isAllSelect=!1,t.getList(),t.$util.Tips({title:e.message,icon:"success"})})).catch((function(e){return t.$util.Tips({title:e})}))},historyAllCheck:function(t,e){t.allCheck?(t.allCheck=!1,t.list.forEach((function(t,e){t.check=!1}))):(t.allCheck=!0,t.list.forEach((function(t,e){t.check=!0}))),this.cartAllCheck("goodsCheck")},bindDelete:function(e,i){var n=this;(0,c.historyDelete)(e.user_history_id).then((function(e){n.list.splice(i,1),t.showToast({title:e.message,icon:"none"})})).catch((function(e){t.showToast({title:e,icon:"none"})}))},goPage:function(e){(0,n.goShopDetail)(e.spu).then((function(i){t.navigateTo({url:"/pages/goods_details/index?id=".concat(e.spu.product_id)})}))},cartAllCheck:function(t){var e=this,i=[];this.list.forEach((function(c,n){if("goodsCheck"==t){var l=c.list.filter((function(t){return 1==t.check}));c.list.length==l.length?(c.allCheck=!0,i.push(c)):c.allCheck=!1}else c.list.forEach((function(t){t.check=e.isAllSelect})),c.allCheck=e.isAllSelect,c.allCheck&&i.push(c)})),this.isAllSelect=i.length==this.list.length}},onReachBottom:function(){this.getList()},onPageScroll:function(e){t.$emit("scroll")}};e.default=s}).call(this,i("543d")["default"])},c2bf:function(t,e,i){"use strict";i.r(e);var c=i("c0c6"),n=i.n(c);for(var l in c)["default"].indexOf(l)<0&&function(t){i.d(e,t,(function(){return c[t]}))}(l);e["default"]=n.a}},[["9f43","common/runtime","common/vendor"]]]);