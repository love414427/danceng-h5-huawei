(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/presell_order_list/index"],{"08fc":function(t,e,i){"use strict";i.r(e);var n=i("d6ac"),o=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a},"2dee":function(t,e,i){},"39e3":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=(this._self._c,this.orderList.length),i=this.orderList.length;this.$mp.data=Object.assign({},{$root:{g0:e,g1:i}})},o=[]},a9b4:function(t,e,i){"use strict";var n=i("2dee"),o=i.n(n);o.a},d695:function(t,e,i){"use strict";i.r(e);var n=i("39e3"),o=i("08fc");for(var r in o)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(r);i("a9b4");var a=i("f0c5"),s=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"08b94dc1",null,!1,n["a"],void 0);e["default"]=s.exports},d6ac:function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("9523")),r=i("59c6"),a=i("6859"),s=i("4d59"),c=i("26cb"),u=i("3255");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}getApp();var f={components:{payment:function(){Promise.all([i.e("common/vendor"),i.e("components/payment/index")]).then(function(){return resolve(i("fecf"))}.bind(null,i)).catch(i.oe)},emptyPage:function(){i.e("components/emptyPage").then(function(){return resolve(i("c71c"))}.bind(null,i)).catch(i.oe)},authorize:function(){Promise.all([i.e("common/vendor"),i.e("components/Authorize")]).then(function(){return resolve(i("02f6"))}.bind(null,i)).catch(i.oe)}},data:function(){return{loading:!1,loadend:!1,loadTitle:"加载更多",orderList:[],orderData:{},orderStatus:0,page:1,limit:20,payMode:[{name:"微信支付",icon:"icon-weixinzhifu",value:"wechat",title:"微信快捷支付",payStatus:1},{name:"支付宝支付",icon:"icon-zhifubao",value:"alipay",title:"支付宝支付",payStatus:this.$store.getters.globalData.alipay_open},{name:"余额支付",icon:"icon-yuezhifu",value:"balance",title:"可用余额:",number:0,payStatus:this.$store.getters.globalData.yue_pay_status}],pay_close:!1,pay_order_id:"",totalPrice:"0",isAuto:!1,isShowAuth:!1,isTimePay:!1}},computed:l(l({},(0,c.mapGetters)(["isLogin","viewColor"])),(0,u.configMap)(["hide_mer_status","community_status","alipay_open","yue_pay_status"])),onShow:function(){this.isLogin?(this.$set(this,"orderList",[]),this.page=1,this.loadend=!1,this.loading=!1,this.getOrderList(),this.getUserInfo()):(this.isAuto=!0,this.isShowAuth=!0)},onReady:function(){},methods:{onLoadFun:function(){this.isShowAuth=!1,this.getOrderList(),this.getUserInfo()},authColse:function(t){this.isShowAuth=t},onChangeFun:function(t){var e=t,i=e.action||null,n=void 0!=e.value?e.value:null;i&&this[i]&&this[i](n)},getUserInfo:function(){var t=this;(0,a.getUserInfo)().then((function(e){t.payMode[2].number=e.data.now_money}))},payClose:function(){this.pay_close=!1},onLoad:function(t){t.status&&(this.orderStatus=t.status)},cancelOrder:function(t,e){var i=this;if(!e)return i.$util.Tips({title:"缺少订单号无法取消订单"});(0,r.orderDel)(e).then((function(e){return i.$util.Tips({title:e.message,icon:"success"},(function(){i.orderList.splice(t,1),i.$set(i,"orderList",i.orderList),i.$set(i.orderData,"unpaid_count",i.orderData.unpaid_count-1)}))})).catch((function(t){return i.$util.Tips({title:t})}))},goPay:function(t,e){this.$set(this,"pay_close",!0),this.order_id=e,this.pay_order_id=e.toString(),this.$set(this,"totalPrice",t)},pay_complete:function(){this.loadend=!1,this.page=1,this.$set(this,"orderList",[]),this.pay_close=!1,this.pay_order_id="",this.getOrderList()},pay_fail:function(){this.pay_close=!1,this.pay_order_id=""},goStore:function(e){1!=this.hide_mer_status&&t.navigateTo({url:"/pages/store/home/index?id=".concat(e)})},goOrderDetails:function(e){if(!e)return that.$util.Tips({title:"缺少订单号无法查看订单详情"});t.showLoading({title:"正在加载"}),(0,s.openOrderSubscribe)().then((function(){t.hideLoading(),t.navigateTo({url:"/pages/order_details/index?order_id="+e})})).catch((function(){t.hideLoading()}))},getOrderList:function(){var t=this;t.loadend||t.loading||(t.loading=!0,t.loadTitle="加载更多",(0,r.getOrderList)({status:10,page:t.page,limit:t.limit}).then((function(e){var i=e.data.list||[],n=i.length<t.limit;t.orderList=t.$util.SplitArray(i,t.orderList),t.$set(t,"orderList",t.orderList),t.getProductCount(),t.loadend=n,t.loading=!1,t.loadTitle=n?"我也是有底线的":"加载更多",t.page=t.page+1})).catch((function(e){t.loading=!1,t.loadTitle="加载更多"})))},getProductCount:function(){var t=this;0!==this.orderStatus&&this.orderList.forEach((function(e,i){var n=0;e.orderProduct.forEach((function(t){n+=t.product_num})),t.orderList[i]["orderNum"]=n}))},delOrder:function(t,e){var i=this;(0,r.orderDel)(t).then((function(t){return i.orderList.splice(e,1),i.$set(i,"orderList",i.orderList),i.$set(i.orderData,"unpaid_count",i.orderData.unpaid_count-1),i.$util.Tips({title:"删除成功",icon:"success"})})).catch((function(t){return i.$util.Tips({title:t})}))},confirmOrder:function(e,i){var n=this;t.showModal({title:"确认收货",content:"为保障权益，请收到货确认无误后，再确认收货",success:function(t){t.confirm&&(0,r.orderTake)(e.order_id).then((function(t){return n.$util.Tips({title:"操作成功",icon:"success"},(function(){n.orderList.splice(i,1)}))})).catch((function(t){return n.$util.Tips({title:t})}))}})}},onReachBottom:function(){this.getOrderList()}};e.default=f}).call(this,i("543d")["default"])},d6f7:function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("4c7d");n(i("66fd"));var o=n(i("d695"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])}},[["d6f7","common/runtime","common/vendor"]]]);