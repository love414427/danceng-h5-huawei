(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/store/list/index"],{"1dac":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return r}));var r={WaterfallsFlow:function(){return i.e("components/WaterfallsFlow/WaterfallsFlow").then(i.bind(null,"7612"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,1!=t.tabIndex||t.is_switch?null:t.productList.length),r=1==t.tabIndex&&t.is_switch?t.productList.length:null,o=1==t.tabIndex?0==t.productList.length&&t.where.page>1:null;t._isMounted||(t.e0=function(e){t.downStatus=!t.downStatus}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:r,g2:o}})},s=[]},"2a32":function(t,e,i){"use strict";(function(t,e){var r=i("4ea4");i("4c7d");r(i("66fd"));var o=r(i("4b1f"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(o.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},"2dd1":function(t,e,i){"use strict";var r=i("a8d3"),o=i.n(r);o.a},"4b1f":function(t,e,i){"use strict";i.r(e);var r=i("1dac"),o=i("eb59");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("2dd1");var n=i("f0c5"),a=Object(n["a"])(o["default"],r["b"],r["c"],!1,null,"6719a1cf",null,!1,r["a"],void 0);e["default"]=a.exports},a8d3:function(t,e,i){},b7a5:function(t,e,i){"use strict";(function(t){var r=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(i("9523")),s=i("736f"),n=i("041f"),a=i("3255"),c=i("26cb"),h=i("f823"),d=i("f26a");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){(0,o.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}getApp();var f={computed:(0,a.configMap)({hide_mer_status:0,recommend_switch:0},(0,c.mapGetters)(["uid","isLogin","viewColor","keyColor"])),components:{recommend:function(){Promise.all([i.e("common/vendor"),i.e("components/recommend/index")]).then(function(){return resolve(i("1857"))}.bind(null,i)).catch(i.oe)},rightSlider:function(){i.e("components/rightSlidera").then(function(){return resolve(i("d83c"))}.bind(null,i)).catch(i.oe)},WaterfallsFlow:function(){i.e("components/WaterfallsFlow/WaterfallsFlow").then(function(){return resolve(i("7612"))}.bind(null,i)).catch(i.oe)},authorize:function(){Promise.all([i.e("common/vendor"),i.e("components/Authorize")]).then(function(){return resolve(i("02f6"))}.bind(null,i)).catch(i.oe)}},watch:{tabIndex:function(t,e){1==t?(this.loadend=!1,this.$set(this.where,"page",1),this.get_product_list(!0)):(this.downStatus=!1,this.storeMerchantList())}},data:function(){return{domain:d.HTTP_REQUEST_URL,productList:[],is_switch:!0,where:{mer_cate_id:"",order:"",price_on:"",price_off:"",brand_id:"",keyword:"",page:1,limit:30},price:0,stock:0,nows:!1,loadend:!1,loading:!1,loadTitle:"加载更多",title:"",hostProduct:[],hotPage:1,hotLimit:10,hotScroll:!1,rightBox:!1,brandList:[],downKey:0,downStatus:!1,downMenu:[{title:"综合",key:1},{title:"评分",key:2},{title:"新品",key:3}],firstKey:0,tabIndex:1,storeList:[],sotreParam:{keyword:"",page:1,limit:10,order:""},storeKey:0,storeScroll:!0,mer_id:"",sortId:"",price_on:"",price_off:"",isAuto:!1,isShowAuth:!1}},onLoad:function(t){this.$set(this.where,"mer_cate_id",t.id||""),this.$set(this,"mer_id",t.mer_id||""),this.title=t.title||"",this.$set(this.where,"keyword",t.searchValue||""),this.get_product_list(),this.get_host_product()},onReady:function(){},mounted:function(){},methods:{goShop:function(e){1!=this.hide_mer_status&&t.navigateTo({url:"/pages/store/home/index?id=".concat(e)})},storeMerchantList:function(){var t=this;this.storeScroll&&(0,s.storeMerchantList)({keyword:this.where.keyword,page:this.sotreParam.page,limit:this.sotreParam.limit,order:this.sotreParam.order}).then((function(e){t.storeScroll=e.data.list.length>=t.sotreParam.limit,t.sotreParam.page+=1,t.storeList=t.storeList.concat(e.data.list)}))},storeTab:function(t){this.storeKey=t,this.sotreParam.order=0==t?"":1==t?"sales":"rate",this.sotreParam.page=1,this.storeScroll=!0,this.storeList=[],this.storeMerchantList()},bindRight:function(){this.price=0,this.firstKey=4,this.getBrandlist()},getBrandlist:function(){var t=this,e=[];(0,s.getBrandlist)({mer_cate_id:this.where.mer_cate_id,keyword:this.where.keyword,mer_id:this.mer_id}).then((function(i){e=i.data.list.map((function(t){return l(l({},t),{},{check:!1})})),t.where.brand_id.length>0&&t.where.brand_id.forEach((function(t,i){e.forEach((function(e,i){e&&t==e.brand_id&&(e.check=!0)}))})),t.brandList=e,t.rightBox=!0}))},onLoadFun:function(t){this.isShowAuth=!1},authColse:function(t){this.isShowAuth=t},godDetail:function(e){var i=this;(0,h.goShopDetail)(e,this.uid).then((function(r){i.isLogin?(0,n.initiateAssistApi)(e.activity_id).then((function(e){var i=e.data.product_assist_set_id;t.hideLoading(),t.navigateTo({url:"/pages/activity/assist_detail/index?id="+i})})).catch((function(e){t.showToast({title:e,icon:"none"})})):(i.isAuto=!0,i.isShowAuth=!0)}))},confirm:function(t){this.price_on=t.price_on,this.price_off=t.price_off;var e=[];0==t.brandList.length?this.where.brand_id="":(t.brandList.forEach((function(t){e.push(t.brand_id)})),this.where.brand_id=e),this.rightBox=t.status,this.where.price_on=t.price_on,this.where.price_off=t.price_off,this.where.mer_id=this.mer_id,this.loadend=!1,this.$set(this.where,"page",1),this.get_product_list(!0)},close:function(){this.rightBox=!1},bindDown:function(t,e){this.firstKey=0,0==e?this.where.order="":1==e?this.where.order="rate":2==e&&(this.where.order="is_new"),this.downKey=e,this.downStatus=!1,this.loadend=!1,this.$set(this.where,"page",1),this.get_product_list(!0)},Changswitch:function(){this.is_switch=!this.is_switch},searchSubmit:function(t){this.$set(this.where,"keyword",t.detail.value),1==this.tabIndex?(this.loadend=!1,this.$set(this.where,"page",1),this.get_product_list(!0)):(this.sotreParam.page=1,this.storeScroll=!0,this.storeList=[],this.storeMerchantList())},get_host_product:function(){var t=this;t.hotScroll||(0,s.getProductHot)(t.hotPage,t.hotLimit).then((function(e){t.hotPage++,t.hotScroll=e.data.length<t.hotLimit,t.hostProduct=t.hostProduct.concat(e.data.list)}))},set_where:function(e){switch(this.downStatus=!1,e){case 1:t.navigateBack();break;case 2:this.firstKey=e,0==this.price?(this.price=1,this.where.order="price_asc"):1==this.price?(this.price=2,this.where.order="price_desc"):2==this.price&&(this.price=0,this.where.order=""),this.$set(this.where,"page",1),this.get_product_list(!0);break;case 3:this.price=0,this.loadend=!1,this.$set(this.where,"order","sales"),this.$set(this.where,"page",1),this.get_product_list(!0),this.firstKey=e;break}this.loadend=!1,this.$set(this.where,"page",1),this.get_product_list(!0)},get_product_list:function(t){var e=this;e.loadend||e.loading||(!0===t&&e.$set(e,"productList",[]),e.loading=!0,e.loadTitle="",(0,s.merchantProduct)(e.mer_id,e.where).then((function(t){var i=t.data.list,r=e.$util.SplitArray(i,e.productList),o=i.length<e.where.limit;e.loadend=o,e.loading=!1,e.loadTitle=o?"已全部加载":"加载更多",e.$set(e,"productList",r),e.$set(e.where,"page",e.where.page+1)})).catch((function(t){e.loading=!1,e.loadTitle="加载更多"})))}},onReachBottom:function(){1==this.tabIndex?this.productList.length>0?this.get_product_list():this.get_host_product():this.storeMerchantList()},onPullDownRefresh:function(){var e=this;setTimeout((function(){var i=e.productList.reverse();e.productList=i,t.stopPullDownRefresh()}),500)},onPageScroll:function(){t.$emit("scroll")}};e.default=f}).call(this,i("543d")["default"])},eb59:function(t,e,i){"use strict";i.r(e);var r=i("b7a5"),o=i.n(r);for(var s in r)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return r[t]}))}(s);e["default"]=o.a}},[["2a32","common/runtime","common/vendor"]]]);