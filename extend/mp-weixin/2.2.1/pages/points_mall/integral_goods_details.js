(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/points_mall/integral_goods_details"],{"05a0":function(t,e,i){"use strict";var r=i("7028"),s=i.n(r);s.a},"2a24":function(t,e,i){"use strict";i.r(e);var r=i("ce52"),s=i("c7098");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i("05a0");var n=i("f0c5"),o=Object(n["a"])(s["default"],r["b"],r["c"],!1,null,"0ed950e3",null,!1,r["a"],void 0);e["default"]=o.exports},"2ee7":function(t,e,i){"use strict";(function(t){var r=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,a=r(i("9523")),n=i("26cb"),o=i("9252"),u=i("736f"),c=(i("cd6d"),i("ddb3"),i("3255")),h=(i("6859"),i("f26a")),l=getApp(),d=t.getSystemInfoSync().statusBarHeight+"px",p={computed:(0,n.mapGetters)(["uid","isLogin","viewColor","keyColor"]),data:function(){return{dataShow:0,id:0,time:0,storeInfo:[],imgUrls:[],domain:h.HTTP_REQUEST_URL,statusBarHeight:d,parameter:{navbar:"1",return:"1",title:"抢购详情页",color:!1},attribute:{cartAttr:!1,productAttr:[],productSelect:{}},productValue:[],isOpen:!1,attr:"请选择",attrValue:"",status:1,isAuto:!1,isShowAuth:!1,iShidden:!1,limitNum:0,iSplus:!1,replyCount:0,reply:[],replyChance:0,navH:"",navList:["商品","详情"],opacity:0,scrollY:0,topArr:[],toView:"",height:0,heightArr:[],lock:!1,scrollTop:0,tagStyle:{img:"width:100%;display:block;",table:"width:100%",video:"width:100%"},navActive:0,meunHeight:0,backH:"",posters:!1,weixinStatus:!1,posterImageStatus:!1,storeImage:"",PromotionCode:"",posterImage:"",actionSheetHidden:!1,cart_num:1,returnShow:!0,H5ShareBox:!1,routineContact:0,selectSku:{},skuArr:[]}},components:{productConSwiper:function(){i.e("components/productConSwiper/index").then(function(){return resolve(i("58c8"))}.bind(null,i)).catch(i.oe)},productWindow:function(){i.e("components/productWindow/index").then(function(){return resolve(i("b739"))}.bind(null,i)).catch(i.oe)},cusPreviewImg:function(){i.e("components/cusPreviewImg/index").then(function(){return resolve(i("19cf"))}.bind(null,i)).catch(i.oe)},authorize:function(){Promise.all([i.e("common/vendor"),i.e("components/Authorize")]).then(function(){return resolve(i("02f6"))}.bind(null,i)).catch(i.oe)},"jyf-parser":function(){Promise.all([i.e("common/vendor"),i.e("components/jyf-parser/jyf-parser")]).then(function(){return resolve(i("3192"))}.bind(null,i)).catch(i.oe)}},onShareAppMessage:function(){return this.$set(this,"actionSheetHidden",!this.actionSheetHidden),{title:this.storeInfo.store_name||"",imageUrl:this.storeInfo.image||"",path:"/pages/points_mall/integral_goods_details?id="+this.id+"&spid="+this.uid}},onShareTimeline:function(){return this.$set(this,"actionSheetHidden",!this.actionSheetHidden),{title:this.storeInfo.store_name||"",query:{id:this.id,spid:this.uid},imageUrl:this.storeInfo.image||""}},onLoad:function(e){var i=this,r=getCurrentPages();i.returnShow=1!==r.length,t.getSystemInfo({success:function(t){i.height=t.windowHeight,t.statusBarHeight}}),this.isLogin&&(0,c.silenceBindingSpread)(),this.navH=l.globalData.navHeight;var s=t.getMenuButtonBoundingClientRect();if(this.meunHeight=s.height,this.backH=i.navH/2+this.meunHeight/2,e.scene){var a=this.$util.getUrlParams(decodeURIComponent(e.scene));if(!a.id)return this.$util.Tips({title:"缺少参数无法查看商品"},{tab:3,url:1});this.id=a.id,a.pid&&(l.globalData.spid=a.pid)}e.id&&(this.id=e.id,this.status=e.status),this.getIntegralProductDetail()},onShow:function(){t.removeStorageSync("form_type_cart")},methods:(s={authColse:function(t){this.isShowAuth=t},showImg:function(t){this.$refs.cusPreviewImg.open(this.selectSku.suk)},returns:function(){t.navigateBack()},goHome:function(){t.navigateTo({url:"/pages/points_mall/index"})},iptCartNum:function(t){this.$set(this.attribute.productSelect,"cart_num",num),this.$set(this,"cart_num",num)}},(0,a.default)(s,"returns",(function(){t.navigateBack()})),(0,a.default)(s,"onLoadFun",(function(t){this.isShowAuth=!1})),(0,a.default)(s,"getIntegralProductDetail",(function(){var e=this,i=this;(0,o.getIntegralProductDetail)(i.id).then((function(r){e.dataShow=1;var s=r.data.store_name;for(var a in e.storeInfo=r.data,e.imgUrls=r.data.slider_image,e.limitNum=r.data.once_max_count,e.storeInfo.description=e.storeInfo.content.content.replace(/<img/gi,'<img style="max-width:100%;height:auto;float:left;display:block" '),e.attribute.productAttr=r.data.attr,e.productValue=r.data.sku,r.data.productValue){var n=r.data.productValue[a];i.skuArr.push(n)}e.$set(e,"selectSku",i.skuArr[0]),e.reply=r.data.reply?[r.data.reply]:[],t.setNavigationBarTitle({title:s.substring(0,7)+"..."}),i.DefaultSelect(),l.globalData.openPages="/pages/activity/goods_seckill_details/index?id="+i.id+"&scene="+i.storeInfo.uid})).catch((function(t){i.$util.Tips({title:t},{tab:3})}))})),(0,a.default)(s,"setShare",(function(){this.$wechat.isWeixin()&&this.$wechat.wechatEvevt(["updateAppMessageShareData","updateTimelineShareData","onMenuShareAppMessage","onMenuShareTimeline"],{desc:this.storeInfo.info,title:this.storeInfo.title,link:location.href,imgUrl:this.storeInfo.image}).then((function(t){})).catch((function(t){}))})),(0,a.default)(s,"DefaultSelect",(function(){var t=this.attribute.productAttr,e=[];for(var i in this.productValue)if(this.productValue[i].stock>0){e=this.attribute.productAttr.length?i.split(","):[];break}for(var r=0;r<t.length;r++)this.$set(t[r],"index",e[r]);var s=this.productValue[e.join(",")];s&&t.length||s&&!t.length?(this.$set(this.attribute.productSelect,"image",s.image),this.$set(this.attribute.productSelect,"price",s.price),this.$set(this.attribute.productSelect,"ot_price",s.ot_price||0),this.$set(this.attribute.productSelect,"stock",s.stock),this.$set(this.attribute.productSelect,"unique",s.unique),this.$set(this.attribute.productSelect,"cart_num",1),this.$set(this,"attrValue",e.join(",")),this.attrValue=e.join(",")):!s&&t.length?(this.$set(this.attribute.productSelect,"image",this.storeInfo.image),this.$set(this.attribute.productSelect,"price",this.storeInfo.price),this.$set(this.attribute.productSelect,"ot_price",this.storeInfo.ot_price||0),this.$set(this.attribute.productSelect,"stock",0),this.$set(this.attribute.productSelect,"unique",""),this.$set(this.attribute.productSelect,"cart_num",0),this.$set(this,"attrValue",""),this.$set(this,"attrTxt","请选择")):s||t.length||(this.$set(this.attribute.productSelect,"image",this.storeInfo.image),this.$set(this.attribute.productSelect,"price",this.storeInfo.price),this.$set(this.attribute.productSelect,"ot_price",this.storeInfo.ot_price||0),this.$set(this.attribute.productSelect,"stock",this.storeInfo.stock),this.$set(this.attribute.productSelect,"unique",this.storeInfo.unique||""),this.$set(this.attribute.productSelect,"cart_num",1),this.$set(this,"attrValue",""),this.$set(this,"attrTxt","请选择")),this.$set(this.attribute.productSelect,"store_name",this.storeInfo.store_name)})),(0,a.default)(s,"selecAttr",(function(){this.attribute.cartAttr=!0})),(0,a.default)(s,"onMyEvent",(function(){this.$set(this.attribute,"cartAttr",!1),this.$set(this,"isOpen",!1)})),(0,a.default)(s,"attrVal",(function(t){this.attribute.productAttr[t.indexw].index=this.attribute.productAttr[t.indexw].attr_values[t.indexn]})),(0,a.default)(s,"ChangeAttr",(function(t){this.$set(this,"cart_num",1);var e=this.productValue[t];e?(this.$set(this.attribute.productSelect,"image",e.image),this.$set(this.attribute.productSelect,"price",e.price),this.$set(this.attribute.productSelect,"ot_price",e.ot_price),this.$set(this.attribute.productSelect,"stock",e.stock),this.$set(this.attribute.productSelect,"unique",e.unique),this.$set(this.attribute.productSelect,"cart_num",1),this.$set(this,"attrValue",t),this.attrTxt="已选择"):(this.$set(this.attribute.productSelect,"image",this.storeInfo.image),this.$set(this.attribute.productSelect,"price",this.storeInfo.price),this.$set(this.attribute.productSelect,"ot_price",this.storeInfo.ot_price),this.$set(this.attribute.productSelect,"stock",0),this.$set(this.attribute.productSelect,"unique",""),this.$set(this.attribute.productSelect,"cart_num",0),this.$set(this,"attrValue",""),this.attrTxt="已选择")})),(0,a.default)(s,"scroll",(function(t){var e=t.detail.scrollTop,i=e/200;if(i=i>1?1:i,this.opacity=i,this.scrollY=e,this.lock)this.lock=!1;else for(var r=0;r<this.topArr.length;r++)if(e<this.topArr[r]-l.globalData.navHeight/2+this.heightArr[r]){this.navActive=r;break}})),(0,a.default)(s,"tap",(function(t,e){var i=t.id;e=e;this.toView=i,this.navActive=e,this.lock=!0,this.scrollTop=e>0?this.topArr[e]-l.globalData.navHeight/2:this.topArr[e]})),(0,a.default)(s,"goCat",(function(){if(this.isLogin){var e=this,i=this.productValue[this.attrValue];if(this.isOpen?this.attribute.cartAttr=!0:this.attribute.cartAttr=!this.attribute.cartAttr,!0===this.attribute.cartAttr&&0==this.isOpen)return this.isOpen=!0;if(this.attribute.productAttr.length&&void 0===i&&1==this.isOpen)return l.$util.Tips({title:"请选择属性"});if(this.cart_num<=0)return l.$util.Tips({title:"请选择数量"});this.isOpen=!1;var r={is_new:1,product_id:e.id,cart_num:e.attribute.productSelect.cart_num,product_attr_unique:void 0!==e.attribute.productSelect?e.attribute.productSelect.unique:"",product_type:20};(0,u.postCartAdd)(r).then((function(i){e.isOpen=e.attribute.cartAttr=!1,t.navigateTo({url:"/pages/points_mall/integral_order?cartId=".concat(i.data.cart_id)})})).catch((function(t){return e.$util.Tips({title:t})}))}else this.isAuto=!0,this.isShowAuth=!0})),s)};e.default=p}).call(this,i("543d")["default"])},7028:function(t,e,i){},c7098:function(t,e,i){"use strict";i.r(e);var r=i("2ee7"),s=i.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return r[t]}))}(a);e["default"]=s.a},ce52:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return r}));var r={jyfParser:function(){return Promise.all([i.e("common/vendor"),i.e("components/jyf-parser/jyf-parser")]).then(i.bind(null,"3192"))}},s=function(){var t=this.$createElement,e=(this._self._c,this.attribute.productAttr.length),i=e?this.skuArr.length:null,r=e&&i>1?this.skuArr.slice(0,4):null,s=e&&i>1?this.skuArr.length:null;this.$mp.data=Object.assign({},{$root:{g0:e,g1:i,l0:r,g2:s}})},a=[]},e095:function(t,e,i){"use strict";(function(t,e){var r=i("4ea4");i("4c7d");r(i("66fd"));var s=r(i("2a24"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(s.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])}},[["e095","common/runtime","common/vendor"]]]);