(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/orderList/index"],{"29f7":function(e,t,n){"use strict";n.r(t);var i=n("b8c7"),r=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=r.a},"38c9":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=(e._self._c,!e.loading&&e.list.length<=0);e._isMounted||(e.e0=function(t){e.refundMark=!1}),e.$mp.data=Object.assign({},{$root:{g0:n}})},r=[]},"53de":function(e,t,n){"use strict";n.r(t);var i=n("38c9"),r=n("29f7");for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n("abcd");var o=n("f0c5"),s=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,"134a9439",null,!1,i["a"],void 0);t["default"]=s.exports},"711d":function(e,t,n){},a303:function(e,t,n){"use strict";(function(e,t){var i=n("4ea4");n("4c7d");i(n("66fd"));var r=i(n("53de"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},abcd:function(e,t,n){"use strict";var i=n("711d"),r=n.n(i);r.a},b8c7:function(e,t,n){"use strict";(function(e){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("2eee")),a=i(n("c973")),o=n("316e"),s=n("5a7e"),d={name:"AdminOrderList",components:{Loading:function(){n.e("components/Loading/index").then(function(){return resolve(n("a869"))}.bind(null,n)).catch(n.oe)},PriceChange:function(){n.e("components/PriceChange/index").then(function(){return resolve(n("71d4"))}.bind(null,n)).catch(n.oe)}},data:function(){return{current:"",change:!1,refundMark:!1,types:1,where:{page:1,limit:10,status:1,store_name:""},list:[],loaded:!1,loading:!1,refundInfo:{},orderInfo:{},status:"",merId:""}},watch:{"$route.params.types":function(e){void 0!=e&&(this.where.status=e,this.init())},types:function(){this.getIndex()}},onLoad:function(e){this.where.status=e.types,this.current="",this.merId=e.merId,this.getIndex()},methods:{handleSearch:function(){this.loaded=!1,this.where.page=1,this.list=[],this.getIndex()},getIndex:function(){var e=this;e.loading||e.loaded||(e.loading=!0,6==e.where.status?(0,o.getRefundOrderList)(e.where,e.merId).then((function(t){e.loading=!1,e.loaded=t.data.list.length<e.where.limit,e.list.push.apply(e.list,t.data.list),e.where.page=e.where.page+1}),(function(t){e.$util.Tips({title:t})})):(0,o.getOrderList)(e.where,e.merId).then((function(t){e.loading=!1,e.loaded=t.data.list.length<e.where.limit,e.list.push.apply(e.list,t.data.list),e.where.page=e.where.page+1}),(function(t){e.$util.Tips({title:t})})))},init:function(){this.list=[],this.where.page=1,this.loaded=!1,this.loading=!1,this.getIndex(),this.current=""},changeStatus:function(e){"verify"!=e?this.where.status!=e&&(this.where.status=e,delete this.where.is_verify,this.init()):(this.where.is_verify=1,delete this.where.status,this.init())},modify:function(e,t){var n=t.toString();this.change=!0,this.orderInfo=e,this.status=n},refundModify:function(e){this.refundInfo=e,this.refundMark=!0},save:function(e){var t=this,n=this;if(!n.refundInfo.mer_mark)return this.$util.Tips({title:"请输入备注"});(0,o.setRefundMark)(n.merId,n.refundInfo.refund_order_id,{mer_mark:n.refundInfo.mer_mark}).then((function(e){n.refundMark=!1,t.$util.Tips({title:e.message,icon:"success"})}),(function(e){n.refundMark=!1,n.$util.Tips({title:e})}))},changeclose:function(e){this.change=e},confirmOrder:function(t){var n=this;e.showModal({title:"确认收货",content:"为保障权益，请收到货确认无误后，再确认收货",success:function(e){e.confirm&&(0,o.refundOrderReceive)(n.merId,t.refund_order_id).then((function(e){return n.$util.Tips({title:"操作成功",icon:"success"},(function(){t.status=3}))})).catch((function(e){return n.$util.Tips({title:e})}))}})},toPostage:function(t){var n=this;0!=t.refunding?e.showModal({title:"标题",content:"该订单有售后申请，请确认已处理！",success:function(i){i.confirm&&e.navigateTo({url:"/pages/admin/delivery/index?id=".concat(t.order_id,"&merId=").concat(n.merId)})}}):e.navigateTo({url:"/pages/admin/delivery/index?id=".concat(t.order_id,"&merId=").concat(n.merId)})},savePrice:function(e){var t=this;return(0,a.default)(r.default.mark((function n(){var i,a,d,c,u,f;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t,a={},d=e.orderInfo.pay_postage,e.refund_price,i.orderInfo.refund_status,c=e.remark,u={pay_postage:e.orderInfo.pay_postage,coupon_price:e.orderInfo.coupon_price,total_price:Number(e.orderInfo.total_price)},f=i.orderInfo.order_id,0!=i.status){n.next=10;break}if((0,s.isMoney)(e.orderInfo.pay_postage||e.orderInfo.total_price)){n.next=6;break}return n.abrupt("return",i.$util.Tips({title:"请输入正确的金额"}));case 6:a.pay_price=d,(0,o.setAdminOrderPrice)(t.merId,f,u).then((function(){i.change=!1,i.$util.Tips({title:"改价成功",icon:"success"}),i.init()}),(function(e){i.change=!1,i.$util.Tips({title:e,icon:"none"})})),n.next=13;break;case 10:if(c){n.next=12;break}return n.abrupt("return",t.$util.Tips({title:"请输入备注"}));case 12:(0,o.setAdminOrderRemark)(t.merId,f,{remark:c}).then((function(e){i.change=!1,t.$util.Tips({title:e.message,icon:"success"}),i.init()}),(function(e){i.change=!1,i.$util.Tips({title:e})}));case 13:case"end":return n.stop()}}),n)})))()},toDetail:function(t){e.navigateTo({url:"/pages/admin/orderDetail/index?id=".concat(t.order_id,"&mer_id=").concat(t.mer_id)})},toRefundDetail:function(t){e.navigateTo({url:"/pages/admin/refundDetail/index?id=".concat(t.refund_order_id,"&mer_id=").concat(t.mer_id)})}},onReachBottom:function(){this.getIndex()}};t.default=d}).call(this,n("543d")["default"])}},[["a303","common/runtime","common/vendor"]]]);